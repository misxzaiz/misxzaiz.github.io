import{g as getStorageSync,o as openBlock,c as createElementBlock,a as createBaseVNode,b as createVNode,w as withCtx,t as toDisplayString,e as createBlock,r as resolveComponent,d as createTextVNode,f as createCommentVNode}from"./index-941e2147.js";import{a as getTopServerListApi,b as getServerListApi,c as getServerBalanceApi,s as setServerDetailApi}from"./api.02df9778.js";import{_ as _export_sfc,d as dealMethodApi}from"./_plugin-vue_export-helper.a6ec604b.js";import{g as getServerUsedApi}from"./interface.c3d03e8a.js";const server_vue_vue_type_style_index_0_scoped_c1eeff27_lang="",_sfc_main={data:()=>({list:{serverTopList:[],serverList:[]},po:{serverDetail:{serverName:null,name:null,desc:null},serverPo:{name:null,ip:null,port:null,weight:null,area:null,classList:[]},classList:{name:null,path:null,version:null,methodList:[]},methodDetail:{name:null,parameterList:[]},parameterList:{name:null,parameterList:[],parameterJson:null},dealMethodPo:{id:null,token:null,serverName:null,className:null,version:null,methodName:null,data:null,result:null,jsonData:{}}},dialog:{editServer:!1}}),onLoad(){},mounted(){this.getTopServerList()},methods:{getServerUsed(e){this.po.dealMethodPo.serverName=e.serverName,getServerUsedApi(e.serverName).then((e=>{this.list.serverList=e.data.data}))},getTopServerList(){getTopServerListApi().then((e=>{this.list.serverTopList=e.data.data}))},getServerList(e){this.po.dealMethodPo.serverName=e.serverName,getServerListApi(e.serverName).then((t=>{e.status=0!==t.data.data.length,this.list.serverList=t.data.data}))},getServerBalance(e){this.po.dealMethodPo.serverName=e.serverName,getServerBalanceApi(e.serverName).then((t=>{e.status=0!==t.data.data.length,this.list.serverList=t.data.data}))},editDialog(e){this.dialog.editServer=!0,this.po.serverDetail=e},edit(){setServerDetailApi(this.po.serverDetail).then((e=>{this.$message.success("修改成功！")}))},showServerDetail(e){this.po.dealMethodPo.name=e.name,this.po.serverPo=e},showMethod(method,row){if(this.po.dealMethodPo.className=row.name,this.po.dealMethodPo.methodName=method.name,this.po.dealMethodPo.version=row.version,0!==method.parameterList.length){let args=method.parameterList[0].parameterList;null!==args?(this.po.dealMethodPo.data=method.parameterList[0].parameterJson,this.po.dealMethodPo.jsonData=eval("("+method.parameterList[0].parameterJson+")"),console.log(this.po.dealMethodPo.jsonData)):this.po.dealMethodPo.data=""}else this.po.dealMethodPo.data=""},dealMethod(){this.po.dealMethodPo.token=getStorageSync("token"),dealMethodApi(this.po.dealMethodPo).then((e=>{this.po.dealMethodPo.result=e.data,this.po.dealMethodPo.result.dataJson=JSON.stringify(e.data.data,null,2).replace(/\\n/g,"\n")}))},showMethodDetail(e){this.po.dealMethodPo.className=e.name,this.po.dealMethodPo.version=e.version,this.po.classList=e}}};function _sfc_render(e,t,a,l,o,r){const d=resolveComponent("el-link"),s=resolveComponent("el-table-column"),i=resolveComponent("el-text"),c=resolveComponent("el-table"),p=resolveComponent("el-input"),n=resolveComponent("el-form-item"),h=resolveComponent("el-form"),m=resolveComponent("el-button"),u=resolveComponent("el-dialog"),v=resolveComponent("el-tag"),N=resolveComponent("el-descriptions-item"),V=resolveComponent("el-descriptions");return openBlock(),createElementBlock("div",{class:"container"},[createBaseVNode("div",{class:"server-list"},[createVNode(c,{data:o.list.serverTopList,style:{width:"100%"},stripe:""},{default:withCtx((()=>[createVNode(s,{prop:"serverName",label:"项目名",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.getServerList(e.row)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.serverName),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"serverName",label:"调用",width:"60"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.getServerUsed(e.row)},{default:withCtx((()=>[createTextVNode(" 查看 ")])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"status",label:"状态",width:"80"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[e.row.status?(openBlock(),createBlock(i,{key:0,type:"success"},{default:withCtx((()=>[createTextVNode("正常")])),_:1})):(openBlock(),createBlock(i,{key:1,type:"danger"},{default:withCtx((()=>[createTextVNode("停机")])),_:1}))])])),_:1}),createVNode(s,{prop:"serverName",label:"负载均衡",width:"100"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.getServerBalance(e.row)},{default:withCtx((()=>[createTextVNode("随机")])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"name",label:"名字","min-width":"120"}),createVNode(s,{prop:"desc",label:"描述","min-width":"120"}),createVNode(s,{prop:"edit",label:"编辑",width:"80"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.editDialog(e.row)},{default:withCtx((()=>[createTextVNode("编辑")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),createVNode(u,{modelValue:o.dialog.editServer,"onUpdate:modelValue":t[3]||(t[3]=e=>o.dialog.editServer=e),title:o.po.serverDetail.serverName},{default:withCtx((()=>[createVNode(h,{model:o.po.serverDetail},{default:withCtx((()=>[createVNode(n,{label:"昵称"},{default:withCtx((()=>[createVNode(p,{modelValue:o.po.serverDetail.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.po.serverDetail.name=e)},null,8,["modelValue"])])),_:1}),createVNode(n,{label:"描述"},{default:withCtx((()=>[createVNode(p,{modelValue:o.po.serverDetail.desc,"onUpdate:modelValue":t[1]||(t[1]=e=>o.po.serverDetail.desc=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),createBaseVNode("div",{slot:"footer",class:"dialog-footer"},[createVNode(m,{onClick:t[2]||(t[2]=e=>o.dialog.editServer=!1)},{default:withCtx((()=>[createTextVNode("取消")])),_:1}),createVNode(m,{type:"primary",onClick:r.edit},{default:withCtx((()=>[createTextVNode("确认")])),_:1},8,["onClick"])])])),_:1},8,["modelValue","title"]),createVNode(c,{data:o.list.serverList,style:{width:"100%"},stripe:""},{default:withCtx((()=>[createVNode(s,{prop:"name",label:"服务名","min-width":"120"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.showServerDetail(e.row)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.name),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"ip",label:"IP","min-width":"100"}),createVNode(s,{prop:"port",label:"端口号",width:"80"}),createVNode(s,{prop:"weight",label:"权重",width:"80"}),createVNode(s,{prop:"area",label:"区域",width:"80"})])),_:1},8,["data"]),createVNode(c,{data:o.po.serverPo.classList,style:{width:"100%"},stripe:""},{default:withCtx((()=>[createVNode(s,{prop:"className",label:"类名","min-width":"100"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.showMethodDetail(e.row)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.name),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"path",label:"类路径","min-width":"160"}),createVNode(s,{prop:"version",label:"类标识","min-width":"60"})])),_:1},8,["data"]),createVNode(c,{data:o.po.classList.methodList,style:{width:"100%"},stripe:""},{default:withCtx((()=>[createVNode(s,{prop:"name",label:"方法",width:"150"},{default:withCtx((e=>[createBaseVNode("div",{class:"table-cell"},[createVNode(d,{type:"primary",plain:"",onClick:t=>r.showMethod(e.row,o.po.classList)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.name),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"deal",label:"属性",width:"120"},{default:withCtx((e=>[e.row.parameterList.length>0?(openBlock(),createElementBlock("div",{key:0,class:"table-cell"},toDisplayString(e.row.parameterList[0].name),1)):createCommentVNode("v-if",!0)])),_:1})])),_:1},8,["data"])]),createBaseVNode("div",{class:"service-list"},[createBaseVNode("div",{style:{width:"100%","margin-top":"20px"}},[createBaseVNode("div",{style:{"font-size":"large","font-weight":"bolder","margin-bottom":"1%"}},toDisplayString(o.po.dealMethodPo.serverName)+" - "+toDisplayString(o.po.dealMethodPo.className)+" - "+toDisplayString(o.po.dealMethodPo.methodName)+" - "+toDisplayString(o.po.dealMethodPo.version),1),createBaseVNode("div",null,[createVNode(h,{model:o.po.dealMethodPo,style:{"margin-top":"10px"}},{default:withCtx((()=>[createVNode(n,{label:""},{default:withCtx((()=>[createVNode(p,{type:"textarea",modelValue:o.po.dealMethodPo.data,"onUpdate:modelValue":t[4]||(t[4]=e=>o.po.dealMethodPo.data=e),placeholder:"data",clearable:"",rows:6,size:"small"},null,8,["modelValue"])])),_:1}),createVNode(n,null,{default:withCtx((()=>[createVNode(m,{type:"primary",onClick:r.dealMethod,size:"small"},{default:withCtx((()=>[createTextVNode("执行")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])]),createBaseVNode("div",null,[createBaseVNode("div",null,[createVNode(V,{title:"",size:"small"},{default:withCtx((()=>[null!=o.po.dealMethodPo.result?(openBlock(),createBlock(N,{key:0,label:"结果状态码"},{default:withCtx((()=>[200===o.po.dealMethodPo.result.code?(openBlock(),createBlock(v,{key:0,class:"ml-2",type:"success",size:"small"},{default:withCtx((()=>[createTextVNode(toDisplayString(o.po.dealMethodPo.result.code),1)])),_:1})):(openBlock(),createBlock(v,{key:1,class:"ml-2",type:"danger",size:"small"},{default:withCtx((()=>[createTextVNode(toDisplayString(o.po.dealMethodPo.result.code),1)])),_:1}))])),_:1})):(openBlock(),createBlock(N,{key:1,label:"结果状态码"},{default:withCtx((()=>[createVNode(v,{class:"ml-2",type:"success",size:"small"},{default:withCtx((()=>[createTextVNode("0")])),_:1})])),_:1})),null!=o.po.dealMethodPo.result?(openBlock(),createBlock(N,{key:2,label:"结果消息"},{default:withCtx((()=>[createTextVNode(toDisplayString(o.po.dealMethodPo.result.message),1)])),_:1})):(openBlock(),createBlock(N,{key:3,label:"结果消息"},{default:withCtx((()=>[createTextVNode("0 ")])),_:1}))])),_:1})]),createBaseVNode("div",{label:"结果数据"},[null!=o.po.dealMethodPo.result?(openBlock(),createBlock(p,{key:0,type:"textarea",modelValue:o.po.dealMethodPo.result.dataJson,"onUpdate:modelValue":t[5]||(t[5]=e=>o.po.dealMethodPo.result.dataJson=e),placeholder:"data",clearable:"",rows:6,size:"small"},null,8,["modelValue"])):(openBlock(),createBlock(p,{key:1,type:"textarea",placeholder:"data",clearable:"",rows:6,size:"small"}))])])])])])}const Server=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-c1eeff27"]]);export{Server as default};
