# 多线程

| 概念 | 说明 |
| ---- | ---- |
| 并发 |      |
| 并行 |      |
| 进程 |      |
| 线程 |      |

## 一、实现方式

| 实现方式      | 说明           |
| ------------- | -------------- |
| 继承 Thread   |                |
| 实现 Runnable |                |
| 实现 Callable | 可以带有返回值 |

### 1、继承 Thread

```java
package org.example;

import org.junit.jupiter.api.Test;

public class CreateThreadTest {

    // 静态内部类
    public static class MyThread extends Thread {
        @Override
        public void run(){
            System.out.println("【线程】线程名："+getName()+"\t线程id："+getId());
        }
    }

    @Test
    public void createThreadTest(){
        MyThread myThread1 = new MyThread();
        MyThread myThread2 = new MyThread();

        myThread1.setName("线程1");
        myThread2.setName("线程2");

        myThread1.start();
        myThread2.start();
        // 直接新建线程并执行
        new MyThread().start();
    }
}
```

```
【线程】线程名：线程1	线程id：13
【线程】线程名：线程2	线程id：14
【线程】线程名：Thread-3	线程id：15
```

### 2、实现 Runnable

```java
    // 2. 实现 Runnable
    // 静态内部类
    public static class MyRunnable implements Runnable {
        @Override
        public void run(){
            Thread t = Thread.currentThread();
            System.out.println("【线程】线程名："+t.getName()+"\t线程id："+t.getId());
        }
    }

    @Test
    public void createThreadWithRunnableTest(){
        // 创建 MyRunnable 对象
        MyRunnable myRunnable = new MyRunnable();
        // 创建线程对象
        Thread myThread1 = new Thread(myRunnable);
        Thread myThread2 = new Thread(myRunnable);
        myThread1.setName("线程1");
        myThread2.setName("线程2");

        myThread1.start();
        myThread2.start();
        new Thread(myRunnable).start();
    }
```

```java
【线程】线程名：线程1	线程id：13
【线程】线程名：线程2	线程id：14
【线程】线程名：Thread-3	线程id：15
```

### 3、实现 Callable

1. 创建一个类 MyCallable 实现 Callable 接口
2. 重写 call 方法（带有返回值）
3. 创建 MyCallable 对象（表示多线程要执行的任务）
4. 创建 FutureTask 对象（作用管理多线程运行的结果）
5. 创建 Thread 类的对象，并启动

```java
    // 3. 实现 Callable
    // 静态内部类
    public static class MyCallable implements Callable {
        @Override
        public String call(){
            Thread t = Thread.currentThread();
            return t.getName();
        }
    }

    @Test
    public void createThreadWithCallableTest() throws ExecutionException, InterruptedException {
        // 创建 MyRunnable 对象
        MyCallable myRunnable = new MyCallable();
        // 创建 FutureTask 对象
        FutureTask<String> ft1 = new FutureTask<>(myRunnable);
        FutureTask<String> ft2 = new FutureTask<>(myRunnable);
        // 创建线程对象
        Thread t1 = new Thread(ft1);
        Thread t2 = new Thread(ft2);
        t1.start();
        t2.start();
        System.out.println("【Callable】返回值："+ft1.get());
        System.out.println("【Callable】返回值："+ft2.get());
    }
```

```
【Callable】返回值：Thread-1
【Callable】返回值：Thread-2
```

## 二、Thread 的成员方法

下面是使用Markdown表格总结了Java中`Thread`类常用的方法。

这些方法使得我们可以通过`Thread`类来控制线程的启动、运行、暂停、终止等操作，方便实现多线程编程。

### 1、静态方法
| 方法                             | 描述                                       |
| -------------------------------- | ------------------------------------------ |
| `static void sleep(long millis)` | 使当前线程**休眠**指定的毫秒数             |
| `static void yield()`            | 表示当前线程愿意让出执行权                 |
| `static Thread currentThread()`  | 返回当前正在执行的线程的引用               |
| `static boolean interrupted()`   | 测试当前线程是否已经中断，并会清除中断状态 |


### 2、其他方法

| 方法                                | 描述                                                       |
| ----------------------------------- | ---------------------------------------------------------- |
| `void start()`                      | 启动线程，调用线程的`run()`方法                            |
| `void run()`                        | 线程执行的逻辑代码，在`Thread`类中是空的，需要子类重写实现 |
| `void join()`                       | 等待该线程终止                                             |
| `void interrupt()`                  | 中断线程，给线程发送中断信号                               |
| `boolean isAlive()`                 | 判断线程是否存活                                           |
| `void setName(String name)`         | 设置线程的名称                                             |
| `String getName()`                  | 获取线程的名称                                             |
| `void setPriority(int priority)`    | 设置线程的优先级                                           |
| `int getPriority()`                 | 获取线程的优先级                                           |
| `void setDaemon(boolean on)`        | 设置线程是否为守护线程                                     |
| `boolean isDaemon()`                | 判断线程是否为守护线程                                     |
| `void interrupted()`                | 测试当前线程是否已经中断，并会清除中断状态                 |
| `boolean isInterrupted()`           | 测试线程是否已经中断                                       |
| `void join(long millis)`            | 等待该线程终止的最长时间为 millis 毫秒                     |
| `void join(long millis, int nanos)` | 等待该线程终止的时间最长为 millis 毫秒 + nanos 纳秒        |

