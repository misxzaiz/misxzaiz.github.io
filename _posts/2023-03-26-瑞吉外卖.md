---
layout:			post
title:			"瑞吉外卖"
subtitle: 		""
author:			"XiaoZaiz"
header-style: 	text
catalog:      	true
tags:
    - Java
    - Spring
    - MyBatis
    - MySQL
---

# 基础
## 一、软件开发整体介绍
### 1. 软件开发流程
- 需求分析：产品原型、需求规格说明书
- 设计：产品文档、UI界面、概要、详细、数据库
- 编码：项目代码、单元测试
- 测试：测试用例、测试报告
- 上线运维：软件环境安装、配置
### 2. 角色分工
- 项目经理：对整个项目负责，任务分配、把控进度
- 产品经理：进行需求调研
- UI设计师：
- 架构师：
- 开发工程师：
- 测试工程师：
- 运维工程师:
### 3. 软件环境
- 开发环境（development）
- 测试环境（testing）
- 生产环境（production）

## 二、瑞吉外卖项目介绍
### 1 项目介绍
### 2. 产品原型展示
### 3. 技术选型
#### 用户层
- H5
- VUE.js
- ElementUI
- 微信小程序
#### 网关层
- Nginx
#### 应用层
- SpringBoot
- Spring MVC
- Spring Session
- Spring
- Swagger
- lombok
#### 数据层
- Mysql
- Mybatis
- Mybatis Plus
- Redis：缓存
#### 工具
- git
- maven
- junit
### 4. 功能架构
- 移动端前台
- 系统管理后台
### 5. 角色
- 后台系统管理员
- 后台系统普通员工
- C端用户

## 三、开发环境搭建
### 1. 数据库搭建（reggie）
- 创建数据库
- 导入表文件（"\1 瑞吉外卖项目\资料\数据模型\db_reggie.sql"）

```java
Class.forName("com.mysql.cj.jdbc.Driver");
Connection conn = DriverManager.getConnection(
  "jdbc:mysql://ap-southeast.connect.psdb.cloud/db?sslMode=VERIFY_IDENTITY",
  "b17wn3np85ofvlozhcq1",
  "pscale_pw_2gMkB2szBZKiNt7HILHaay0o1VP4TJeQZl13JF05tSE");
```

```txt
mysql -h ap-southeast.connect.psdb.cloud -u b17wn3np85ofvlozhcq1 -ppscale_pw_2gMkB2szBZKiNt7HILHaay0o1VP4TJeQZl13JF05tSE
```

### 2. 开发环境搭建

- maven项目：`pom.xml`

- 配置：`application.yml`
- 注解：@`Slf4j`（`log.info()`）

- 静态资源：`static`
- 配置：`config`

#### 2.1 pom.xml

jdk：17

依赖：

- **Lombox**
- **Spring Web**
- **MySQL Driver**
- **MyBatis Framework**
- fastjson
- commons-lang
- druid（springboot3暂时无法使用：2023-3-27 23:09）
- mybatis-plus

#### 2.2 application.yml

```xml
server:
  port: 80 # 应用的端口号为 80。
spring:
  application:
    name: reggie # 应用的名字为 Reggie。
  datasource:
    druid: # Druid 连接池配置。通过这个配置项可以设置 MySQL 的连接地址、用户名和密码等参数。
      driver-class-name: com.mysql.cj.jdbc.Driver
      url: jdbc:mysql://ap-southeast.connect.psdb.cloud/db?sslMode=VERIFY_IDENTITY
      username: b17wn3np85ofvlozhcq1
      password: pscale_pw_2gMkB2szBZKiNt7HILHaay0o1VP4TJeQZl13JF05tSE
mybatis-plus:
  configuration:
    # Mybatis-Plus 的配置信息。在这里设置了表名采用的下划线转驼峰命名规则，并且指定了将 Mybatis 的 SQL 日志输出到控制台上。
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      # 在 Mybatis-Plus 中进行主键生成策略的配置。这里配置了 ASSIGN_ID，表示使用手动分配 ID 的方式来生成主键。
      id-type: ASSIGN_ID
```

#### 2.3 @Slf4j

`@Slf4j` 是 Lombok 库提供的注解，它会根据不同的目标平台（如：JavaSE、Android、GWT等）自动选择最合适的日志框架，并在编译时生成对应的日志实现类。具体来说，使用 `@Slf4j` 注解能够自动为一个类添加一个名为 `log` 的 `private static final Logger` 类型的字段，并且该字段可以被用来记录日志。

使用 `@Slf4j` 注解可以大大简化代码中使用日志框架时的一些常规性的操作，比如创建logger实例，手动书写不同日志级别的方法等。该注解在 Spring Boot 等项目中得到了广泛应用，可以有效提高开发效率和代码可读性。

```java
package com.example.demo;

import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@Slf4j
public class DemoController {
    
    @GetMapping("/hello")
    @ResponseBody
    public String hello() {
        log.info("访问了 /hello 接口");
        return "Hello World!";
    }
}
```

在上述代码中，我使用了 `@Slf4j` 注解为 `DemoController` 类生成了一个名为 `log` 的 Logger 实例，通过调用该实例来记录日志信息。当然，我们还需要在项目中引入 lombok 和 logback 等相关依赖才能使其生效。

#### 2.4 static（静态文件）

- backend
- front

#### 2.5 配置config

### 3. 后台登录和退出

- 页面原型（backend/page/login/login.html）

- 员工实体类（Employee）
- 员工映射类（EmployeeMapper）
- 员工Service接口和实现类（EmployeeService、EmployeeServiceImpl）
- 员工控制类（EmployeeController）
- 通用类（R）

- 过滤器（Filter）或拦截器

#### 3.1 登录页面

```html
```



#### 3.2 实体类Employee

```java
@Data
public class Employee implements Serializable {

    private static final long serialVersionUID = 1L;

    private Long id;

    private String username;

    private String name;

    private String password;

    private String phone;

    private String sex;

    private String idNumber;

    private Integer status;

    private LocalDateTime createTime;

    private LocalDateTime updateTime;

    @TableField(fill = FieldFill.INSERT)
    private Long createUser;
    
    @TableField(fill = FieldFill.INSERT_UPDATE)
    private Long updateUser;
}
```

##### 瞬态成员变量

非瞬态成员变量是指在一个类中定义的持久化数据成员，其值会被保留并可供多个方法或实例使用，直到它们被显式地修改或者对象被销毁。这种类型的成员变量通常用于存储类的状态信息和属性，例如对象的名称、位置、大小等。相对而言，瞬态成员变量则是临时性的，其值只在方法执行期间存在，并不会保存到对象的状态中。

瞬态成员变量（transient member variable）是Java语言中的一个关键字，用于修饰一个非静态成员变量。被**transient**修饰的成员变量，不会被默认序列化到对象流中。

在上述示例中，我们使用transient关键字修饰了Person类中的age成员变量。这样，在将Person对象序列化到对象流中时，age字段的值将不会被保存。当需要从对象流中反序列化获得Person对象时，age字段的值也将被设为默认值0。

需要注意的是，使用transient关键字修饰成员变量时，只有那些不含有敏感信息或者没有必要序列化的字段才应该使用该修饰符。

##### Serializable

java.io.Serializable是一个标记接口，它用于表示类的实例可以被序列化为字节流并在网络上传输或存储到文件系统中。当类实现Serializable接口时，它表明该类的所有**非瞬态成员变量**都可以被序列化。为了使类能够被正确地序列化，在编写序列化代码时需要注意以下几点：

1. 要求类及其所有非瞬态成员变量都必须是可序列化的。

2. 需要提供一个 **serialVersionUID 静态常量**，用于指示相应类版本的唯一性。

3. 如果类包含对象引用，则需要确保这些对象也是可序列化的。

4. 可以通过实现writeObject()和readObject()方法来自定义对象的序列化和反序列化过程。

5. 可以使用Java序列化API来将对象序列化为字节数组，或从字节数组中反序列化回对象。



下面代码演示了如何**实现Java`对象`的序列化和反序列化**。

在Person类中，age关键字前使用了`transient`修饰符。因此，在序列化时age字段不会被存储。当需要从对象流中反序列化获得Person对象时，age字段的值也将被设为默认值0。

在SerializationDemo类中，首先创建一个Person对象并将其写入文件person.ser中（序列化操作），然后从该文件中读取数据并将其反序列化为一个新的Person对象，最后输出新对象中的姓名和年龄值。

总的来说，由于**Java对象在网络上传输、存储到磁盘等过程中都需要进行序列化操作**，因此这个知识点对于学习Java编程是非常重要的。

```java
import java.io.*;

public class SerializationDemo {

    public static void main(String[] args) {
        // 创建一个Person对象
        Person person = new Person("张三", 25);

        // 将Person对象序列化到文件中
        try (ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("person.ser"))) {
            oos.writeObject(person);
        } catch (IOException e) {
            e.printStackTrace();
        }

        // 从文件中读取Person对象并进行反序列化
        try (ObjectInputStream ois = new ObjectInputStream(new FileInputStream("person.ser"))) {
            Person p = (Person) ois.readObject();
            System.out.println(p.getName() + ", " + p.getAge());
        } catch (IOException | ClassNotFoundException e) {
            e.printStackTrace();
        }
    }

}

class Person implements Serializable {

    private static final long serialVersionUID = 1L;
    
    private String name;
    private transient int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

}
```



#### 3.3 映射类EmployeeMapper

#### 3.4 Service接口和实现类EmployeeService、EmployeeServiceImpl

#### 3.5 控制类EmployeeController

#### 3.6 通用类R

#### 3.7 过滤器Filter

