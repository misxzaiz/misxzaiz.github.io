import{_ as A,r as p,G as D,H as J,o as K,c,a as e,h as F,t as a,n as f,F as k,d as M,w as $,X as O,f as d,b as j}from"./index-0g_e_Ani.js";const P={class:"empire-rise-game"},Q={key:0,class:"game-intro"},U={key:1,class:"game-container"},W={class:"game-header"},Y={class:"game-status"},Z=["disabled"],ee={key:0,class:"game-over-modal"},oe={class:"modal-content"},te={key:0},se={key:1},ae={class:"game-main"},le={class:"resources-panel"},ie={class:"resource-items"},ne={class:"resource"},ue={class:"resource"},ce={class:"resource"},de={class:"resource"},re={class:"resource"},pe={class:"resource"},ve={class:"resource"},fe={class:"resource"},he={key:0,class:"event-panel"},me={class:"event-effects"},ge={class:"game-tabs"},_e={class:"tab-buttons"},be={class:"tab-content"},ye={class:"buildings-grid"},ke={class:"building-costs"},Me={class:"building-produces"},qe=["onClick","disabled"],Ee={class:"tab-content"},we={class:"technologies-grid"},Ce={class:"tech-cost"},Be=["onClick","disabled"],$e={class:"tab-content"},Oe={class:"game-logs"},je={class:"log-timestamp"},Re={class:"log-message"},Te={__name:"EmpireRise",setup(xe){const R=p(!1),h=p(1),T=p(30),y=p(!1),E=p(!1),l=p({gold:100,food:100,wood:100,stone:50,population:10,happiness:80,science:0,military:10}),m=p([{id:"farm",name:"å†œåœº",count:0,cost:{gold:20,wood:30},produces:{food:10},description:"å¢åŠ é£Ÿç‰©äº§é‡"},{id:"mine",name:"çŸ¿åœº",count:0,cost:{gold:20,stone:20},produces:{gold:8},description:"å¢åŠ é‡‘å¸äº§é‡"},{id:"house",name:"ä½å®…",count:0,cost:{gold:30,wood:40,stone:10},produces:{population:5},description:"å¢åŠ äººå£ä¸Šé™"},{id:"lumbermill",name:"ä¼æœ¨åœº",count:0,cost:{gold:20,stone:15},produces:{wood:10},description:"å¢åŠ æœ¨æäº§é‡"},{id:"quarry",name:"é‡‡çŸ³åœº",count:0,cost:{gold:20,wood:20},produces:{stone:8},description:"å¢åŠ çŸ³æäº§é‡"},{id:"barracks",name:"å…µè¥",count:0,cost:{gold:50,wood:30,stone:30},produces:{military:5},description:"å¢åŠ å†›äº‹åŠ›é‡"},{id:"market",name:"å¸‚åœº",count:0,cost:{gold:40,wood:20},produces:{gold:15,happiness:5},description:"å¢åŠ é‡‘å¸äº§é‡å’Œå¹¸ç¦åº¦"},{id:"academy",name:"å­¦é™¢",count:0,cost:{gold:60,stone:40},produces:{science:10},description:"å¢åŠ ç§‘ç ”ç‚¹æ•°"},{id:"temple",name:"ç¥åº™",count:0,cost:{gold:40,stone:40},produces:{happiness:15},description:"å¤§å¹…æå‡å¹¸ç¦åº¦"}]),v=p([{id:"agriculture",name:"å†œä¸šæ”¹è‰¯",cost:50,acquired:!1,effect:{farm:1.5},description:"å†œåœºæ•ˆç‡æé«˜50%"},{id:"mining",name:"é‡‡çŸ¿æŠ€æœ¯",cost:50,acquired:!1,effect:{mine:1.5},description:"çŸ¿åœºæ•ˆç‡æé«˜50%"},{id:"construction",name:"å»ºç­‘æŠ€æœ¯",cost:60,acquired:!1,effect:{buildCostReduction:.2},description:"å»ºç­‘æˆæœ¬é™ä½20%"},{id:"military",name:"å†›äº‹æˆ˜ç•¥",cost:70,acquired:!1,effect:{barracks:1.5},description:"å…µè¥æ•ˆç‡æé«˜50%"},{id:"trade",name:"è´¸æ˜“è·¯çº¿",cost:80,acquired:!1,effect:{market:1.5},description:"å¸‚åœºæ•ˆç‡æé«˜50%"},{id:"education",name:"æ•™è‚²ç³»ç»Ÿ",cost:100,acquired:!1,effect:{academy:1.5,scienceBoost:1.2},description:"å­¦é™¢æ•ˆç‡æé«˜50%ï¼Œç§‘ç ”äº§å‡ºæé«˜20%"},{id:"religion",name:"å®—æ•™ä¿¡ä»°",cost:120,acquired:!1,effect:{temple:1.5,happinessBoost:1.2},description:"ç¥åº™æ•ˆç‡æé«˜50%ï¼Œå¹¸ç¦åº¦æé«˜20%"},{id:"urbanization",name:"åŸå¸‚åŒ–",cost:150,acquired:!1,effect:{allBuildingsBoost:1.1},description:"æ‰€æœ‰å»ºç­‘äº§å‡ºæé«˜10%"}]),x=[{id:"goodHarvest",title:"ä¸°æ”¶",description:"ä»Šå¹´çš„æ”¶æˆç‰¹åˆ«å¥½ï¼",effect:{food:50,happiness:10}},{id:"drought",title:"å¹²æ—±",description:"å¹²æ—±å¯¼è‡´ç²®é£Ÿå‡äº§ã€‚",effect:{food:-30,happiness:-10}},{id:"goldRush",title:"æ·˜é‡‘çƒ­",description:"å‘ç°äº†æ–°çš„é‡‘çŸ¿ï¼",effect:{gold:100}},{id:"plague",title:"ç˜Ÿç–«",description:"ä¸€åœºç˜Ÿç–«å¸­å·äº†ä½ çš„åŸå¸‚ã€‚",effect:{population:-5,happiness:-20}},{id:"festival",title:"èŠ‚æ—¥åº†å…¸",description:"ä¸¾åŠäº†ç››å¤§çš„èŠ‚æ—¥åº†å…¸ã€‚",effect:{gold:-20,happiness:25}},{id:"refugees",title:"éš¾æ°‘åˆ°æ¥",description:"ä¸€ç¾¤éš¾æ°‘è¯·æ±‚åœ¨ä½ çš„åŸå¸‚å®šå±…ã€‚",effect:{population:8,food:-20}},{id:"invention",title:"é‡å¤§å‘æ˜",description:"ä½ çš„å­¦è€…æœ‰äº†é‡å¤§å‘æ˜ï¼",effect:{science:30}},{id:"trade",title:"è´¸æ˜“ç¹è£",description:"è´¸æ˜“è·¯çº¿ç¹è£å‘å±•ã€‚",effect:{gold:40,happiness:5}},{id:"bandit",title:"å¼ºç›—è¢­å‡»",description:"ä¸€ç¾¤å¼ºç›—è¢­å‡»äº†ä½ çš„åŸå¸‚ã€‚",effect:{gold:-30,military:-5,happiness:-5}}],g=p(null),_=p({cityName:"æ–°éƒ½",difficulty:"normal",populationCap:D(()=>10+m.value.find(t=>t.id==="house").count*5),buildingMultipliers:{}}),q=p([]),n=D(()=>{const t={gold:5,food:5,wood:5,stone:3,population:0,happiness:0,science:0,military:0};m.value.forEach(i=>{if(i.count>0&&i.produces){const X=_.value.buildingMultipliers[i.id]||1;Object.keys(i.produces).forEach(z=>{t[z]+=i.produces[z]*i.count*X})}});const o=v.value.find(i=>i.id==="urbanization");o&&o.acquired&&Object.keys(t).forEach(i=>{t[i]*=o.effect.allBuildingsBoost});const s=v.value.find(i=>i.id==="education");s&&s.acquired&&(t.science*=s.effect.scienceBoost);const u=v.value.find(i=>i.id==="religion");return u&&u.acquired&&(t.happiness*=u.effect.happinessBoost),t.food-=l.value.population*1.5,t}),C=t=>{const o=v.value.find(i=>i.id==="construction"),s=o&&o.acquired?1-o.effect.buildCostReduction:1,u={};return Object.keys(t.cost).forEach(i=>{u[i]=Math.floor(t.cost[i]*s)}),u},N=t=>Object.keys(t).every(o=>l.value[o]>=t[o]),G=t=>{const o=C(t);N(o)&&(Object.keys(o).forEach(s=>{l.value[s]-=o[s]}),t.count+=1,w(),r(`å»ºé€ äº†æ–°çš„${t.name}`))},L=t=>{l.value.science>=t.cost&&!t.acquired&&(l.value.science-=t.cost,t.acquired=!0,w(),r(`ç ”ç©¶å®Œæˆï¼š${t.name}`))},w=()=>{const t={};m.value.forEach(o=>{t[o.id]=1}),v.value.forEach(o=>{o.acquired&&o.effect&&Object.keys(o.effect).forEach(s=>{m.value.some(u=>u.id===s)&&(t[s]=o.effect[s])})}),_.value.buildingMultipliers=t},r=t=>{const o=`ç¬¬ ${h.value} å›åˆ`;q.value.unshift({message:t,timestamp:o}),q.value.length>30&&q.value.pop()},V=()=>{if(Math.random()<.2){const t=x[Math.floor(Math.random()*x.length)];g.value=t,Object.keys(t.effect).forEach(o=>{l.value[o]+=t.effect[o],l.value[o]<0&&(l.value[o]=0)}),r(`äº‹ä»¶ï¼š${t.title} - ${t.description}`)}else g.value=null},H=()=>{Object.keys(n.value).forEach(t=>{l.value[t]+=n.value[t]}),l.value.population>_.value.populationCap&&(l.value.population=_.value.populationCap,r("äººå£å·²è¾¾åˆ°ä¸Šé™ï¼å»ºé€ æ›´å¤šä½å®…ä»¥å¢åŠ äººå£ä¸Šé™ã€‚")),Object.keys(l.value).forEach(t=>{l.value[t]<0&&(l.value[t]=0)}),n.value.food<0&&l.value.food<=0&&(l.value.population=Math.max(0,l.value.population-2),l.value.happiness-=10,r("ä½ çš„åŸå¸‚æ­£åœ¨æŒ¨é¥¿ï¼äººå£å‡å°‘äº†ã€‚")),l.value.happiness<30&&(r("ä½ çš„äººæ°‘éå¸¸ä¸æ»¡ï¼å¯èƒ½ä¼šæœ‰å›ä¹±å‘ç”Ÿã€‚"),Math.random()<.3&&(l.value.population=Math.max(0,l.value.population-1),r("éƒ¨åˆ†å±…æ°‘ç¦»å¼€äº†ä½ çš„åŸå¸‚ã€‚"))),V(),h.value++,I(),r(`ç¬¬ ${h.value} å›åˆå¼€å§‹`)},I=()=>{if(h.value>T.value){y.value=!0,r("æ¸¸æˆç»“æŸï¼šæ—¶é—´ç»“æŸ");return}if(l.value.population<=0){y.value=!0,r("æ¸¸æˆç»“æŸï¼šä½ çš„åŸå¸‚å·²ç»æ— äººå±…ä½");return}if(l.value.population>=200&&v.value.filter(t=>t.acquired).length>=v.value.length*.8&&l.value.happiness>=80){y.value=!0,E.value=!0,r("æ¸¸æˆç»“æŸï¼šæ­å–œä½ å»ºç«‹äº†ç¹è£çš„å¸å›½ï¼");return}},S=()=>{R.value=!0,y.value=!1,E.value=!1,h.value=1,l.value={gold:100,food:100,wood:100,stone:50,population:10,happiness:80,science:0,military:10},m.value.forEach(t=>{t.count=0}),v.value.forEach(t=>{t.acquired=!1}),g.value=null,q.value=[],w(),r("æ¸¸æˆå¼€å§‹ï¼å»ºè®¾ä½ çš„å¸å›½å§ï¼")},b=p("buildings"),B=t=>{b.value=t};return J(()=>l.value.population,(t,o)=>{t>o&&Math.random()<.3&&(l.value.happiness=Math.max(0,l.value.happiness-2))}),K(()=>{w()}),(t,o)=>(d(),c("div",P,[R.value?(d(),c("div",U,[e("div",W,[e("h1",null,"å¸å›½å´›èµ· - "+a(_.value.cityName),1),e("div",Y,[e("span",null,"ç¬¬ "+a(h.value)+" å›åˆ / "+a(T.value),1),e("button",{onClick:H,disabled:y.value,class:"end-turn-btn"},"ç»“æŸå›åˆ",8,Z)])]),y.value?(d(),c("div",ee,[e("div",oe,[e("h2",null,a(E.value?"èƒœåˆ©ï¼":"æ¸¸æˆç»“æŸ"),1),E.value?(d(),c("p",te,"æ­å–œä½ å»ºç«‹äº†ä¸€ä¸ªç¹è£çš„å¸å›½ï¼")):(d(),c("p",se,"ä½ çš„å¸å›½æ²¡èƒ½ç¹è£å‘å±•...")),o[5]||(o[5]=e("p",null,"æœ€ç»ˆæˆç»©:",-1)),e("ul",null,[e("li",null,"ç”Ÿå­˜å›åˆ: "+a(h.value),1),e("li",null,"æœ€ç»ˆäººå£: "+a(l.value.population),1),e("li",null,"å»ºç­‘æ€»æ•°: "+a(m.value.reduce((s,u)=>s+u.count,0)),1),e("li",null,"ç§‘æŠ€è¿›åº¦: "+a(Math.round(v.value.filter(s=>s.acquired).length/v.value.length*100))+"%",1)]),e("button",{onClick:S,class:"restart-button"},"é‡æ–°å¼€å§‹")])])):F("",!0),e("div",ae,[e("div",le,[o[6]||(o[6]=e("h3",null,"èµ„æº",-1)),e("div",ie,[e("div",ne,[e("span",null,"ğŸ’° é‡‘å¸: "+a(Math.floor(l.value.gold)),1),e("span",{class:f(["production",{positive:n.value.gold>0,negative:n.value.gold<0}])}," ("+a(n.value.gold>0?"+":"")+a(Math.floor(n.value.gold))+"/å›åˆ) ",3)]),e("div",ue,[e("span",null,"ğŸŒ½ é£Ÿç‰©: "+a(Math.floor(l.value.food)),1),e("span",{class:f(["production",{positive:n.value.food>0,negative:n.value.food<0}])}," ("+a(n.value.food>0?"+":"")+a(Math.floor(n.value.food))+"/å›åˆ) ",3)]),e("div",ce,[e("span",null,"ğŸªµ æœ¨æ: "+a(Math.floor(l.value.wood)),1),e("span",{class:f(["production",{positive:n.value.wood>0,negative:n.value.wood<0}])}," ("+a(n.value.wood>0?"+":"")+a(Math.floor(n.value.wood))+"/å›åˆ) ",3)]),e("div",de,[e("span",null,"ğŸª¨ çŸ³æ: "+a(Math.floor(l.value.stone)),1),e("span",{class:f(["production",{positive:n.value.stone>0,negative:n.value.stone<0}])}," ("+a(n.value.stone>0?"+":"")+a(Math.floor(n.value.stone))+"/å›åˆ) ",3)]),e("div",re,[e("span",null,"ğŸ‘¥ äººå£: "+a(Math.floor(l.value.population))+" / "+a(_.value.populationCap),1)]),e("div",pe,[e("span",null,"ğŸ˜Š å¹¸ç¦åº¦: "+a(Math.floor(l.value.happiness)),1)]),e("div",ve,[e("span",null,"ğŸ”¬ ç§‘ç ”: "+a(Math.floor(l.value.science)),1),e("span",{class:f(["production",{positive:n.value.science>0}])}," ("+a(n.value.science>0?"+":"")+a(Math.floor(n.value.science))+"/å›åˆ) ",3)]),e("div",fe,[e("span",null,"âš”ï¸ å†›äº‹: "+a(Math.floor(l.value.military)),1)])])]),g.value?(d(),c("div",he,[e("h3",null,"äº‹ä»¶: "+a(g.value.title),1),e("p",null,a(g.value.description),1),e("div",me,[(d(!0),c(k,null,M(g.value.effect,(s,u)=>(d(),c("div",{key:u,class:"event-effect"},a(u)+": "+a(s>0?"+":"")+a(s),1))),128))])])):F("",!0),e("div",ge,[e("div",_e,[e("button",{class:f(["tab-button",{active:b.value==="buildings"}]),onClick:o[0]||(o[0]=s=>B("buildings"))},"å»ºç­‘",2),e("button",{class:f(["tab-button",{active:b.value==="technologies"}]),onClick:o[1]||(o[1]=s=>B("technologies"))},"ç§‘æŠ€",2),e("button",{class:f(["tab-button",{active:b.value==="logs"}]),onClick:o[2]||(o[2]=s=>B("logs"))},"æ—¥å¿—",2)]),$(e("div",be,[o[9]||(o[9]=e("h3",null,"åŸå¸‚å»ºç­‘",-1)),e("div",ye,[(d(!0),c(k,null,M(m.value,s=>(d(),c("div",{key:s.id,class:"building-card"},[e("h4",null,a(s.name)+" ("+a(s.count)+")",1),e("p",null,a(s.description),1),e("div",ke,[o[7]||(o[7]=j(" æˆæœ¬: ")),(d(!0),c(k,null,M(C(s),(u,i)=>(d(),c("span",{key:i,class:f({"not-enough":l.value[i]<u})},a(i)+": "+a(u),3))),128))]),e("div",Me,[o[8]||(o[8]=j(" äº§å‡º: ")),(d(!0),c(k,null,M(s.produces,(u,i)=>(d(),c("span",{key:i},a(i)+": +"+a(u*(_.value.buildingMultipliers[s.id]||1)),1))),128))]),e("button",{onClick:u=>G(s),disabled:!N(C(s))}," å»ºé€  ",8,qe)]))),128))])],512),[[O,b.value==="buildings"]]),$(e("div",Ee,[o[11]||(o[11]=e("h3",null,"ç§‘æŠ€ç ”ç©¶",-1)),e("div",we,[(d(!0),c(k,null,M(v.value,s=>(d(),c("div",{key:s.id,class:f(["tech-card",{"tech-acquired":s.acquired}])},[e("h4",null,a(s.name),1),e("p",null,a(s.description),1),e("div",Ce,[o[10]||(o[10]=j(" ç ”ç©¶ç‚¹æ•°: ")),e("span",{class:f({"not-enough":l.value.science<s.cost})},a(s.cost),3)]),e("button",{onClick:u=>L(s),disabled:s.acquired||l.value.science<s.cost},a(s.acquired?"å·²ç ”ç©¶":"ç ”ç©¶"),9,Be)],2))),128))])],512),[[O,b.value==="technologies"]]),$(e("div",$e,[o[12]||(o[12]=e("h3",null,"æ¸¸æˆæ—¥å¿—",-1)),e("div",Oe,[(d(!0),c(k,null,M(q.value,(s,u)=>(d(),c("div",{key:u,class:"log-entry"},[e("span",je,a(s.timestamp),1),e("span",Re,a(s.message),1)]))),128))])],512),[[O,b.value==="logs"]])])])])):(d(),c("div",Q,[o[3]||(o[3]=e("h1",null,"å¸å›½å´›èµ·",-1)),o[4]||(o[4]=e("p",null,"å»ºè®¾ä½ è‡ªå·±çš„å¸å›½ï¼Œç®¡ç†èµ„æºï¼Œç ”ç©¶ç§‘æŠ€ï¼Œåº”å¯¹å„ç§äº‹ä»¶å’ŒæŒ‘æˆ˜ï¼",-1)),e("button",{onClick:S,class:"start-button"},"å¼€å§‹æ–°æ¸¸æˆ")]))]))}},Se=A(Te,[["__scopeId","data-v-3a779dd4"]]);export{Se as default};
