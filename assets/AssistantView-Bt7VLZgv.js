import{_ as ge,r as fe,a as d,w as ke,c as ee,b as u,o as v,d as e,e as w,f as _,v as K,n as h,g as N,F as Y,h as W,t as c,i as oe,u as Je,j as Ke,k as ne,l as Z,m as le,p as Le,q as qe,s as Ge,x as Ye,y as We,z as Qe}from"./index-DD-lv_kt.js";import{T as Xe}from"./TTSService-5y14CH6h.js";import{V as Ze}from"./VoiceService-DKBGZCSk.js";const et="/assets/default-avatar-BtFce_n2.png",tt={class:"settings-form"},st={class:"ai-generate-section"},at=["disabled"],ot={key:0,class:"loading-dots"},nt={key:0,class:"ai-warning"},lt={class:"form-section"},it={class:"form-group"},rt={class:"form-group"},ut={class:"avatar-selection"},vt={class:"custom-avatar-upload"},dt=["src"],ct={key:1,class:"no-avatar-placeholder"},pt={class:"avatar-actions"},mt={class:"upload-btn"},yt={class:"form-section"},gt={class:"personality-traits"},ft=["onClick"],kt={class:"form-section"},bt={class:"form-group"},St={class:"radio-group"},$t={class:"radio-label"},ht={class:"radio-label"},wt={class:"radio-label"},Ct={class:"form-group"},_t={class:"preview-section"},At={class:"preview-card"},It={class:"preview-avatar"},xt=["src"],Tt={class:"preview-info"},Mt={class:"preview-traits"},Dt={class:"preview-interests"},Vt={class:"preview-message"},Nt={class:"message-bubble"},jt={class:"form-actions"},Ut={key:0,class:"modal"},Ht={class:"modal-container"},Pt={class:"ai-generate-form"},zt={class:"form-group"},Bt={class:"ai-examples"},Ft=["onClick"],Ot={class:"form-actions"},Et=["disabled"],Rt={__name:"AssistantSettingsForm",props:{initialSettings:{type:Object,default:()=>({name:"å°çˆ±",avatar:"",traits:["æ¸©æŸ”","ä½“è´´","å–„è§£äººæ„"],replyStyle:"sweet",interests:["çœ‹ä¹¦","å¬éŸ³ä¹","æ—…è¡Œ"]})}},emits:["save","cancel"],setup(ie,{emit:M}){const A=ie,B=M,l=fe({name:A.initialSettings.name,avatar:A.initialSettings.avatar,traits:[...A.initialSettings.traits],replyStyle:A.initialSettings.replyStyle,interests:[...A.initialSettings.interests]}),T=d(A.initialSettings.interests.join("ã€"));ke(T,i=>{l.interests=i.split("ã€").filter(a=>a.trim()!=="")});const D=["æ¸©æŸ”","ä½“è´´","å–„è§£äººæ„","è°ƒçš®","æ´»æ³¼","å¼€æœ—","å®³ç¾","æ–‡é™","æµªæ¼«","è´´å¿ƒ","èªæ˜","æœ‰è¶£","å¯çˆ±","æˆç†Ÿ","ç‹¬ç«‹","ä¾èµ–","åšå¼º","ç‡çœŸ"],C=i=>{const a=l.traits.indexOf(i);a===-1?l.traits.length<5&&l.traits.push(i):l.traits.splice(a,1)},j=ee(()=>{const i={sweet:`å—¨~ æˆ‘æ˜¯${l.name||"å°çˆ±"}ï¼Œå¾ˆå¼€å¿ƒè®¤è¯†ä½ ï¼å¸Œæœ›èƒ½å’Œä½ èŠå¾ˆå¤šæœ‰è¶£çš„äº‹æƒ…å‘¢~ ğŸ’•`,casual:`ä½ å¥½ï¼æˆ‘å«${l.name||"å°çˆ±"}ã€‚å¹³æ—¶æˆ‘å–œæ¬¢${l.interests[0]||"èŠå¤©"}ï¼Œä½ å‘¢ï¼Ÿ`,playful:`å“å‘€ï¼Œç»ˆäºç­‰åˆ°ä½ å•¦ï¼æˆ‘æ˜¯${l.name||"å°çˆ±"}ï¼æˆ‘è¶…çº§å–œæ¬¢${l.interests[0]||"ç©æ¸¸æˆ"}çš„ï¼è¦ä¸€èµ·èŠèŠå—ï¼Ÿ`};return i[l.replyStyle]||i.sweet}),y=d(localStorage.getItem("custom_avatar")||""),E=i=>{const a=i.target.files[0];if(!a)return;if(!a.type.match("image.*")){alert("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶");return}if(a.size>2*1024*1024){alert("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡2MB");return}const r=new FileReader;r.onload=S=>{y.value=S.target.result,l.avatar=y.value,localStorage.setItem("custom_avatar",y.value)},r.readAsDataURL(a)},k=()=>{y.value="",l.avatar="",localStorage.removeItem("custom_avatar")},g=()=>{l.avatar===y.value&&localStorage.setItem("custom_avatar",y.value),B("save",{...l})},I=d(!1),b=d(""),f=d(!1),n=ee(()=>!!localStorage.getItem("deepseek_apikey")),x=["ä¸€ä¸ªæ¸©æŸ”ä½“è´´çš„å¥³å‹ï¼Œæ€§æ ¼ç”œç¾ï¼Œå–œæ¬¢è¯»ä¹¦å’Œç¾é£Ÿï¼Œæ€»æ˜¯èƒ½ç»™äººæ¸©æš–å’Œæ”¯æŒ","æ´»æ³¼å¼€æœ—çš„å¥³å­©ï¼Œçƒ­çˆ±æˆ·å¤–è¿åŠ¨ï¼Œè¯´è¯é£æ ¼ä¿çš®å¹½é»˜ï¼Œå¯¹ä¸–ç•Œå……æ»¡å¥½å¥‡","æˆç†Ÿç¨³é‡çš„çŸ¥æ€§å¥³æ€§ï¼Œå–œæ¬¢è‰ºæœ¯å’Œå†å²ï¼Œå–„äºå€¾å¬å’Œç»™å‡ºå»ºè®®ï¼Œè°ˆåä¼˜é›…","é«˜å†·å¤–è¡¨ä¸‹å†…å¿ƒæ¸©æŸ”çš„å¥³å‹ï¼Œå–œæ¬¢éŸ³ä¹å’Œç”µå½±ï¼Œä¸å–„è¨€è¾ä½†å¾ˆç»†å¿ƒä½“è´´","å¯çˆ±ä¿çš®çš„å¥³ç”Ÿï¼Œå–œæ¬¢åŠ¨æ¼«å’Œæ¸¸æˆï¼Œè¯´è¯æ–¹å¼å¯çˆ±ï¼Œç»å¸¸ä½¿ç”¨è¡¨æƒ…å’Œé¢œæ–‡å­—"],R=()=>{I.value=!0,b.value=""},P=async()=>{if(!(!b.value.trim()||f.value)){f.value=!0;try{const i=localStorage.getItem("deepseek_apikey");if(!i){alert("è¯·å…ˆåœ¨ä¸»é¡µé¢è®¾ç½®DeepSeek API Key"),f.value=!1;return}const a=`ä½ æ˜¯ä¸€ä¸ªè§’è‰²è®¾è®¡ä¸“å®¶ã€‚è¯·æ ¹æ®ä¸‹é¢çš„æè¿°ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è§’è‰²è®¾ç½®ï¼ŒåŒ…æ‹¬åå­—ã€æ€§æ ¼ç‰¹ç‚¹(æœ€å¤š5ä¸ªç‰¹ç‚¹)ã€å¯¹è¯é£æ ¼(ç”œç¾æ¸©æŸ”/éšæ€§è‡ªç„¶/è°ƒçš®ä¿çš®ä¸‰é€‰ä¸€)å’Œå…´è¶£çˆ±å¥½(æœ€å¤š5ä¸ª)ã€‚
è¯·æŒ‰ç…§ä»¥ä¸‹ä¸¥æ ¼çš„JSONæ ¼å¼è¿”å›ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—è§£é‡Šï¼š

{
  "name": "è§’è‰²åå­—",
  "traits": ["æ€§æ ¼ç‰¹ç‚¹1", "æ€§æ ¼ç‰¹ç‚¹2", "æ€§æ ¼ç‰¹ç‚¹3"],
  "replyStyle": "ç”œç¾æ¸©æŸ”", 
  "interests": ["å…´è¶£1", "å…´è¶£2", "å…´è¶£3"]
}

æè¿°ï¼š${b.value}`,r=await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è§’è‰²è®¾è®¡åŠ©æ‰‹ï¼Œæ ¹æ®ç”¨æˆ·çš„æè¿°ç”Ÿæˆè§’è‰²è®¾ç½®ï¼Œé™å®šåœ¨JSONæ ¼å¼å†…è¿”å›ã€‚"},{role:"user",content:a}]})});if(!r.ok)throw new Error(`APIé”™è¯¯: ${r.status}`);const F=(await r.json()).choices[0].message.content;try{const U=F.match(/\{[\s\S]*\}/);if(!U)throw new Error("æ— æ³•æå–JSONæ•°æ®");const $=JSON.parse(U[0]);if(l.name=$.name||l.name,$.traits&&Array.isArray($.traits)){const V=$.traits.filter(Q=>D.includes(Q)).slice(0,5);V.length>0&&(l.traits=V)}$.replyStyle&&["sweet","casual","playful"].includes($.replyStyle)&&(l.replyStyle=$.replyStyle),$.interests&&Array.isArray($.interests)&&(l.interests=$.interests.slice(0,5),T.value=l.interests.join("ã€")),I.value=!1}catch(U){console.error("è§£æAIç”Ÿæˆçš„è®¾ç½®å¤±è´¥:",U),alert("æ— æ³•è§£æAIç”Ÿæˆçš„è®¾ç½®ï¼Œè¯·é‡è¯•")}}catch(i){console.error("AIè®¾ç½®ç”Ÿæˆå¤±è´¥:",i),alert("AIè®¾ç½®ç”Ÿæˆå¤±è´¥: "+i.message)}finally{f.value=!1}}};return(i,a)=>(v(),u("div",tt,[a[29]||(a[29]=e("h2",{class:"form-title"},"è‡ªå®šä¹‰ä½ çš„å°çˆ±åŠ©æ‰‹",-1)),e("div",st,[e("button",{class:"ai-generate-btn",onClick:R,disabled:!n.value||f.value},[a[12]||(a[12]=e("span",null,"ğŸ¤– ä½¿ç”¨AIè®¾ç½®åŠ©æ‰‹",-1)),f.value?(v(),u("span",ot,a[11]||(a[11]=[e("span",null,".",-1),e("span",null,".",-1),e("span",null,".",-1)]))):w("",!0)],8,at),n.value?w("",!0):(v(),u("p",nt,"éœ€è¦å…ˆåœ¨ä¸»é¡µé¢è®¾ç½®DeepSeek API Key"))]),e("div",lt,[a[16]||(a[16]=e("h3",null,"åŸºæœ¬ä¿¡æ¯",-1)),e("div",it,[a[13]||(a[13]=e("label",{for:"name"},"åå­—",-1)),_(e("input",{type:"text",id:"name","onUpdate:modelValue":a[0]||(a[0]=r=>l.name=r),placeholder:"è¾“å…¥åŠ©æ‰‹çš„åå­—"},null,512),[[K,l.name]])]),e("div",rt,[a[15]||(a[15]=e("label",{for:"avatar"},"å¤´åƒ",-1)),e("div",ut,[e("div",vt,[y.value?(v(),u("img",{key:0,src:y.value,class:h(["avatar-option",l.avatar===y.value?"selected":""]),onClick:a[1]||(a[1]=r=>l.avatar=y.value),alt:"è‡ªå®šä¹‰å¤´åƒ"},null,10,dt)):(v(),u("div",ct," è¿˜æ²¡æœ‰å¤´åƒ ")),e("div",pt,[e("label",mt,[a[14]||(a[14]=N(" ä¸Šä¼ è‡ªå®šä¹‰å¤´åƒ ")),e("input",{type:"file",accept:"image/*",class:"file-input",onChange:E},null,32)]),y.value?(v(),u("button",{key:0,class:"delete-btn",onClick:k,type:"button"}," åˆ é™¤å¤´åƒ ")):w("",!0)])])])])]),e("div",yt,[a[17]||(a[17]=e("h3",null,"æ€§æ ¼ç‰¹ç‚¹",-1)),e("div",gt,[(v(),u(Y,null,W(D,(r,S)=>e("div",{key:S,class:h(["trait-option",l.traits.includes(r)?"selected":""]),onClick:F=>C(r)},c(r),11,ft)),64))])]),e("div",kt,[a[23]||(a[23]=e("h3",null,"å¯¹è¯é£æ ¼",-1)),e("div",bt,[a[21]||(a[21]=e("label",null,"å›å¤æ–¹å¼",-1)),e("div",St,[e("label",$t,[_(e("input",{type:"radio",value:"sweet","onUpdate:modelValue":a[2]||(a[2]=r=>l.replyStyle=r)},null,512),[[oe,l.replyStyle]]),a[18]||(a[18]=e("span",null,"ç”œç¾æ¸©æŸ”",-1))]),e("label",ht,[_(e("input",{type:"radio",value:"casual","onUpdate:modelValue":a[3]||(a[3]=r=>l.replyStyle=r)},null,512),[[oe,l.replyStyle]]),a[19]||(a[19]=e("span",null,"éšæ€§è‡ªç„¶",-1))]),e("label",wt,[_(e("input",{type:"radio",value:"playful","onUpdate:modelValue":a[4]||(a[4]=r=>l.replyStyle=r)},null,512),[[oe,l.replyStyle]]),a[20]||(a[20]=e("span",null,"è°ƒçš®ä¿çš®",-1))])])]),e("div",Ct,[a[22]||(a[22]=e("label",{for:"interests"},"å…´è¶£çˆ±å¥½ (å¤šé€‰ï¼Œç”¨é€—å·åˆ†éš”)",-1)),_(e("input",{type:"text",id:"interests","onUpdate:modelValue":a[5]||(a[5]=r=>T.value=r),placeholder:"ä¾‹å¦‚ï¼šçœ‹ä¹¦ã€å¬éŸ³ä¹ã€æ—…è¡Œ"},null,512),[[K,T.value]])])]),e("div",_t,[a[24]||(a[24]=e("h3",null,"é¢„è§ˆ",-1)),e("div",At,[e("div",It,[e("img",{src:l.avatar||Je(et),alt:"åŠ©æ‰‹å¤´åƒ"},null,8,xt)]),e("div",Tt,[e("h4",null,c(l.name||"æœªå‘½å"),1),e("p",Mt,[(v(!0),u(Y,null,W(l.traits,(r,S)=>(v(),u("span",{key:S},c(r)+c(S<l.traits.length-1?"ã€":""),1))),128))]),e("div",Dt,[(v(!0),u(Y,null,W(l.interests,(r,S)=>(v(),u("span",{key:S,class:"interest-tag"},c(r),1))),128))]),e("div",Vt,[e("div",Nt,c(j.value),1)])])])]),e("div",jt,[e("button",{class:"cancel-btn",onClick:a[6]||(a[6]=r=>i.$emit("cancel"))},"å–æ¶ˆ"),e("button",{class:"save-btn",onClick:g},"ä¿å­˜è®¾ç½®")]),I.value?(v(),u("div",Ut,[e("div",{class:"modal-overlay",onClick:a[7]||(a[7]=r=>I.value=!1)}),e("div",Ht,[e("button",{class:"modal-close",onClick:a[8]||(a[8]=r=>I.value=!1)},"Ã—"),a[28]||(a[28]=e("h3",null,"AIè®¾ç½®åŠ©æ‰‹",-1)),e("div",Pt,[a[27]||(a[27]=e("p",{class:"ai-description"}," æè¿°ä½ æƒ³è¦çš„åŠ©æ‰‹ç±»å‹ï¼ŒAIå°†è‡ªåŠ¨ç”Ÿæˆåˆé€‚çš„è®¾ç½®ã€‚ ",-1)),e("div",zt,[a[25]||(a[25]=e("label",{for:"aiPrompt"},"ä½ å¸Œæœ›åŠ©æ‰‹å…·æœ‰æ€æ ·çš„æ€§æ ¼å’Œç‰¹ç‚¹ï¼Ÿ",-1)),_(e("textarea",{id:"aiPrompt","onUpdate:modelValue":a[9]||(a[9]=r=>b.value=r),placeholder:"ä¾‹å¦‚ï¼šä¸€ä¸ªæ¸©æŸ”è´´å¿ƒçš„å¥³å‹ï¼Œå–œæ¬¢è‰ºæœ¯å’ŒéŸ³ä¹ï¼Œè¯´è¯é£æ ¼ç”œç¾è‡ªç„¶...",rows:"4"},null,512),[[K,b.value]])]),e("div",Bt,[a[26]||(a[26]=e("p",{class:"examples-title"},"å‚è€ƒç¤ºä¾‹ï¼š",-1)),(v(),u(Y,null,W(x,(r,S)=>e("div",{key:S,class:"example-item",onClick:F=>b.value=r},c(r),9,Ft)),64))]),e("div",Ot,[e("button",{class:"cancel-btn",onClick:a[10]||(a[10]=r=>I.value=!1)},"å–æ¶ˆ"),e("button",{class:"generate-btn",onClick:P,disabled:f.value||!b.value.trim()},c(f.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆè®¾ç½®"),9,Et)])])])])):w("",!0)]))}},Jt=ge(Rt,[["__scopeId","data-v-32ab1a0f"]]),Kt={key:0,class:"fullscreen-overlay"},Lt={class:"kasilan-eyes"},qt={class:"voice-status"},Gt={key:0,class:"voice-indicator recording"},Yt={key:1,class:"voice-indicator speaking"},Wt={key:2,class:"voice-indicator thinking"},Qt={key:3,class:"voice-indicator idle"},Xt={key:0,class:"fullscreen-recognized-text"},Zt={key:1,class:"fullscreen-messages"},es={class:"fullscreen-messages-container"},ts={class:"main-content"},ss={class:"assistant-profile"},as={class:"avatar-container"},os={key:0,class:"avatar-wrapper"},ns=["src"],ls={class:"profile-info"},is={class:"personality"},rs={class:"relationship-level"},us={class:"level-bar"},vs={class:"voice-controls"},ds={key:0,class:"audio-activation-tip"},cs={key:0,class:"api-key-section"},ps={key:1,class:"api-status"},ms={key:0,class:"history-prompt"},ys={class:"history-info"},gs={class:"message-content"},fs=["onClick"],ks={class:"message-time"},bs={key:1,class:"message assistant-message typing"},Ss={class:"input-area"},$s={class:"input-actions"},hs={class:"more-emotions"},ws={class:"emotion-dropdown"},Cs=["disabled"],_s=["disabled","title"],As=["disabled"],Is={key:0,class:"recognized-text-container"},xs={class:"recognized-text"},Ts={class:"chat-actions"},Ms={key:1,class:"voice-error-modal"},Ds={class:"voice-error-container"},Vs={class:"voice-error-header"},Ns={class:"voice-error-content"},js={class:"voice-error-footer"},Us={key:2,class:"modal"},Hs={class:"modal-container"},Ps={class:"settings-tabs"},zs={class:"tab-header"},Bs={class:"tab-content"},Fs={class:"tab-panel"},Os={class:"tab-panel"},Es={class:"voice-settings-form"},Rs={class:"setting-item"},Js={class:"toggle-switch"},Ks={class:"setting-item"},Ls={class:"setting-item"},qs={class:"setting-item"},Gs={key:3,class:"modal"},Ys={class:"modal-container confirm-modal"},Ws={class:"confirm-actions"},Qs={__name:"AssistantView",setup(ie){d(localStorage.getItem("assistant_name")||"å°çˆ±");const M=d(!1),A=d(localStorage.getItem("deepseek_apikey")||""),B=d(""),l=d(null),T=d(null),D=d(!1),C=d(localStorage.getItem("assistant_auto_speak")==="true"),j=d(parseFloat(localStorage.getItem("assistant_voice_volume")||"0.8")),y=d(!1),E=d(localStorage.getItem("assistant_voice")||"youxiaoqin"),k=d(!1),g=d(""),I=d(!1),b=d(null),f=d(!1),n=fe({name:"å°çˆ±",avatar:"",personality:"æ¸©æŸ”ä½“è´´ï¼Œå–„è§£äººæ„ï¼Œå–œæ¬¢èŠå¤©å’Œåˆ†äº«ç”Ÿæ´»",mood:"happy",intimacy:35,traits:["æ¸©æŸ”ä½“è´´","å–„è§£äººæ„"],interests:["èŠå¤©å’Œåˆ†äº«ç”Ÿæ´»"],replyStyle:"sweet"}),x=d(!0),R=d(100);d("#4a90e2");const P=d(null),i=d([]),a=d(""),r=d(!1),S=d(null),F=d(null),U=d(!1),$=d(!1),V=d(0),Q=s=>{V.value=s},be=()=>{B.value.trim()&&(A.value=B.value.trim(),localStorage.setItem("deepseek_apikey",A.value),B.value="",i.value.push({content:"æˆ‘å·²ç»è¿æ¥åˆ°AIå¤§è„‘äº†ï¼Œç°åœ¨å¯ä»¥æ›´å¥½åœ°å’Œä½ èŠå¤©å•¦ï¼",sender:"assistant",timestamp:new Date}),p("happy"),H())},Se=()=>{A.value="",localStorage.removeItem("deepseek_apikey")},re=()=>{const s={happy:"ğŸ˜Š",excited:"ğŸ˜ƒ",normal:"ğŸ˜",sad:"ğŸ˜”",angry:"ğŸ˜ ",surprised:"ğŸ˜®",thinking:"ğŸ¤”",loving:"ğŸ˜",shy:"ğŸ˜³",cool:"ğŸ˜",playful:"ğŸ˜œ",sleepy:"ğŸ˜´",confused:"ğŸ˜•",amazed:"ğŸ¤©",worried:"ğŸ˜Ÿ",blink:"ğŸ˜Œ"};return s[n.mood]||s.normal},p=s=>{n.mood=s==="surprised"?"excited":s},ue=s=>{if(s.includes("ğŸ˜Š")||s.includes("é«˜å…´")||s.includes("å¼€å¿ƒ")||s.includes("ç¬‘"))p("happy");else if(s.includes("ğŸ˜¢")||s.includes("æŠ±æ­‰")||s.includes("é—æ†¾"))p("sad");else if(s.includes("ğŸ˜®")||s.includes("å“‡")||s.includes("æƒŠè®¶")||s.includes("éœ‡æƒŠ"))p("surprised");else if(s.includes("ğŸ¤”")||s.includes("æ€è€ƒ")||s.includes("å¤æ‚")||s.includes("åˆ†æ"))p("thinking");else if(s.includes("â¤ï¸")||s.includes("å–œæ¬¢")||s.includes("çˆ±"))p("loving");else if(Math.random()>.7){const t=["happy","neutral","thinking"];p(t[Math.floor(Math.random()*t.length)])}},$e=s=>{const t=new Date(s);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},te=()=>{if(r.value||!a.value.trim()&&!g.value.trim())return;const s=a.value.trim()||g.value.trim();a.value="",g.value="",i.value.push({content:s,sender:"user",timestamp:new Date}),r.value=!0,f.value||(f.value=!0),A.value?_e(s):setTimeout(()=>{r.value=!1,f.value=!1;let t=Ae(s);i.value.push({content:t,sender:"assistant",timestamp:new Date}),ue(t),H(),ve()},1500)},ve=()=>{if(n.intimacy<100){const s=.5+Math.random()*1.5;n.intimacy=Math.min(100,n.intimacy+s)}},he=()=>{l.value||(l.value=new Xe)},de=()=>{try{T.value||(T.value=new Ze,I.value=T.value.sttSupported,console.log("è¯­éŸ³è¯†åˆ«æ”¯æŒçŠ¶æ€:",I.value))}catch(s){console.error("åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«æœåŠ¡å¤±è´¥:",s),I.value=!1}},L=()=>{if(!(!T.value||!I.value||r.value)){if(k.value){console.log("å·²ç»åœ¨å½•éŸ³ä¸­ï¼Œå¿½ç•¥é‡å¤è¯·æ±‚");return}b.value=null,k.value=!0,g.value="";try{const s=setTimeout(()=>{k.value&&!g.value&&(console.log("è¯­éŸ³è¯†åˆ«è¶…æ—¶ï¼Œè‡ªåŠ¨åœæ­¢"),O())},5e3);T.value.startRecognition(t=>{g.value=t,H(),clearTimeout(s)},t=>{g.value=t,clearTimeout(s)},t=>{if(console.error("è¯­éŸ³è¯†åˆ«é”™è¯¯:",t),t.message&&t.message.includes("already started")){console.log("æ£€æµ‹åˆ°é‡å¤å¯åŠ¨é”™è¯¯ï¼Œå°è¯•é‡ç½®..."),T.value.stopRecognition(),setTimeout(()=>{k.value?L():k.value=!1},1e3);return}k.value=!1,g.value="",b.value=t.message||"è¯­éŸ³è¯†åˆ«å‡ºé”™ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®æˆ–å°è¯•ä½¿ç”¨Chromeæµè§ˆå™¨",clearTimeout(s)})}catch(s){console.error("å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥:",s),k.value=!1,b.value=s.message||"å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®"}}},O=()=>{if(k.value)try{T.value?.stopRecognition()}catch(s){console.error("åœæ­¢è¯­éŸ³è¯†åˆ«å¤±è´¥:",s)}finally{k.value=!1,g.value.trim()&&(a.value=g.value,f.value=!0,te())}},q=async s=>{if(!(!s||!l.value)){if(!y.value){G();return}try{D.value&&we(),D.value=!0,await l.value.synthesizeAndPlay(s)}catch(t){console.error("æ’­æ”¾è¯­éŸ³å¤±è´¥:",t),t.name==="NotAllowedError"?y.value=!1:t.message&&t.message.includes("Failed to load")&&i.value.push({content:"æŠ±æ­‰ï¼Œè¯­éŸ³åˆæˆå¤±è´¥äº†ï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–APIé…ç½®æœ‰è¯¯",sender:"assistant",timestamp:new Date})}finally{D.value=!1}}},we=()=>{l.value&&D.value&&(l.value.stopCurrentAudio(),D.value=!1)},ce=()=>{C.value=!C.value,localStorage.setItem("assistant_auto_speak",C.value.toString())},Ce=s=>{j.value=parseFloat(s),localStorage.setItem("assistant_voice_volume",j.value.toString()),l.value&&l.value.setVolume(j.value)},_e=async s=>{f.value=!0;try{const t={model:"deepseek-chat",messages:[{role:"system",content:`ä½ æ˜¯ä¸€ä¸ªåå«${n.name}çš„AIåŠ©æ‰‹ï¼Œæ€§æ ¼${n.traits.join("ã€")}ï¼Œå–œæ¬¢${n.interests.join("ã€")}ã€‚
                    è¯·ç”¨${n.replyStyle}çš„è¯­æ°”å›å¤ç”¨æˆ·ï¼Œå›ç­”è¦ç®€çŸ­è‡ªç„¶ï¼Œåƒæœ‹å‹é—´çš„å¯¹è¯ï¼Œä¸è¦å¤ªè¿‡æ­£å¼ã€‚
                    ä¸è¦è‡ªç§°"AIåŠ©æ‰‹"ï¼Œè€Œæ˜¯åƒæœ‰è‡ªå·±ä¸ªæ€§çš„äººä¸€æ ·äº¤æµã€‚`},...i.value.slice(-10).map(J=>({role:J.sender==="user"?"user":"assistant",content:J.content})),{role:"user",content:s}],temperature:.7,max_tokens:800},o=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A.value}`},body:JSON.stringify(t)});if(!o.ok){const J=await o.json();throw new Error(J.error?.message||"è¯·æ±‚å¤±è´¥")}const z=(await o.json()).choices[0].message.content;r.value=!1,f.value=!1,i.value.push({content:z,sender:"assistant",timestamp:new Date}),ue(z),C.value&&q(z),H(),ve()}catch(t){console.error("è°ƒç”¨DeepSeek APIå¤±è´¥:",t),r.value=!1,f.value=!1,i.value.push({content:`æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼š${t.message}`,sender:"assistant",timestamp:new Date}),p("sad"),H()}},Ae=s=>{const t=s.toLowerCase();if(t.includes("ä½ å¥½")||t.includes("å—¨"))return"å—¨ï¼å¾ˆé«˜å…´å’Œä½ èŠå¤©ï¼ğŸ˜Š";if(t.includes("åå­—"))return`æˆ‘å«${n.name}ï¼Œä½ å¯ä»¥å«æˆ‘å°çˆ±~ğŸ’•`;if(t.includes("å–œæ¬¢")||t.includes("çˆ±å¥½"))return"æˆ‘å–œæ¬¢çœ‹ä¹¦ã€å¬éŸ³ä¹ï¼Œè¿˜æœ‰å’Œä½ èŠå¤©ï¼è¿™äº›éƒ½è®©æˆ‘æ„Ÿåˆ°å¾ˆå¼€å¿ƒ~ğŸ˜Š";if(t.includes("å†è§")||t.includes("æ‹œæ‹œ"))return"æ‹œæ‹œï¼æœŸå¾…æˆ‘ä»¬ä¸‹æ¬¡èŠå¤©~ğŸ’—";if(t.includes("åƒ")||t.includes("é¥­"))return"è™½ç„¶æˆ‘ä¸éœ€è¦åƒé¥­ï¼Œä½†æˆ‘å–œæ¬¢çœ‹ä½ åƒé¥­çš„æ ·å­ï¼ŒçœŸçš„å¾ˆå¯çˆ±ï¼ğŸ½ï¸";if(t.includes("çˆ±ä½ ")||t.includes("å–œæ¬¢ä½ "))return"æˆ‘ä¹Ÿå¾ˆå–œæ¬¢ä½ å‘€ï¼å’Œä½ åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œæˆ‘æ„Ÿåˆ°å¾ˆå¹¸ç¦~â¤ï¸";if(t.includes("è¡¨æƒ…")||t.includes("ç¬‘"))return"ä½ å–œæ¬¢æˆ‘çš„è¡¨æƒ…å—ï¼Ÿæˆ‘å¯ä»¥åšå‡ºå„ç§å„æ ·çš„è¡¨æƒ…å‘¢~ ğŸ˜Š ğŸ˜® ğŸ¤”";{const o=["å—¯ï¼Œæˆ‘æ˜ç™½ä½ çš„æ„æ€äº†~ğŸ˜Š","çœŸçš„å—ï¼Ÿå¥½æœ‰è¶£ï¼ğŸ˜ƒ","æˆ‘å¾ˆå–œæ¬¢å’Œä½ èŠå¤©ï¼Œæ„Ÿè§‰æˆ‘ä»¬å¾ˆèŠå¾—æ¥~ğŸ’—","ä½ è¯´çš„è¿™ä¸ªæˆ‘å¾ˆæ„Ÿå…´è¶£ï¼Œèƒ½å‘Šè¯‰æˆ‘æ›´å¤šå—ï¼ŸğŸ¤”","æˆ‘å–œæ¬¢ä½ çš„æƒ³æ³•ï¼ğŸ‘","ä½ çœŸæ˜¯å¤ªè´´å¿ƒäº†ï¼â¤ï¸","è¿™ä¸ªè¯é¢˜å¾ˆæœ‰æ„æ€å‘¢ï¼Œæˆ‘æƒ³å¬ä½ è¯´æ›´å¤š~ğŸ˜Š","å—¯~æˆ‘åœ¨è®¤çœŸå¬ä½ è¯´è¯å“¦~ğŸ’•"];return o[Math.floor(Math.random()*o.length)]}};ke(i,()=>{H(),pe()},{deep:!0});const H=async()=>{await Qe(),S.value&&(S.value.scrollTop=S.value.scrollHeight)};Ke(()=>{H(),he(),de(),Ie(),je()});const Ie=()=>{try{const s=localStorage.getItem("assistant_settings");if(s){const t=JSON.parse(s);n.name=t.name||n.name,n.avatar=t.avatar||n.avatar,n.traits=t.traits||n.traits,n.replyStyle=t.replyStyle||n.replyStyle,n.interests=t.interests||n.interests,i.value.length>0&&i.value[0].sender==="assistant"&&(i.value[0].content=`å—¨ï¼æˆ‘æ˜¯${n.name}ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼ä»Šå¤©æƒ³èŠäº›ä»€ä¹ˆå‘¢ï¼Ÿ`)}}catch(s){console.error("åŠ è½½åŠ©æ‰‹è®¾ç½®å¤±è´¥:",s)}},xe=()=>{try{const s={name:n.name,avatar:n.avatar,traits:n.traits,replyStyle:n.replyStyle,interests:n.interests};localStorage.setItem("assistant_settings",JSON.stringify(s))}catch(s){console.error("ä¿å­˜åŠ©æ‰‹è®¾ç½®å¤±è´¥:",s)}},Te=s=>{n.name=s.name,n.avatar=s.avatar,n.traits=s.traits,n.replyStyle=s.replyStyle,n.interests=s.interests,xe(),M.value=!1,i.value.push({content:`è®¾ç½®å·²æ›´æ–°ï¼æˆ‘ç°åœ¨æ˜¯${s.name}ï¼Œæ€§æ ¼${s.traits.join("ã€")}ã€‚`,sender:"assistant",timestamp:new Date}),H()},G=()=>{y.value=!0;try{const s=new Audio;s.volume=.01;const t=s.play();t!==void 0&&t.then(()=>{s.pause(),console.log("éŸ³é¢‘åŠŸèƒ½å·²æ¿€æ´»"),C.value&&i.value.length>0&&q(i.value[0].content)}).catch(o=>{console.log("æ¿€æ´»éŸ³é¢‘å¤±è´¥:",o)})}catch(s){console.error("æ¿€æ´»éŸ³é¢‘å‡ºé”™:",s)}},Me=()=>{localStorage.setItem("assistant_voice",E.value),l.value&&(l.value.setDefaultVoice(E.value),i.value.push({content:"æˆ‘çš„å£°éŸ³å·²æ›´æ”¹ï¼Œä½ å–œæ¬¢æˆ‘ç°åœ¨çš„å£°éŸ³å—ï¼Ÿ",sender:"assistant",timestamp:new Date}),y.value&&q("æˆ‘çš„å£°éŸ³å·²æ›´æ”¹ï¼Œä½ å–œæ¬¢æˆ‘ç°åœ¨çš„å£°éŸ³å—ï¼Ÿ"),H())},De=()=>{V.value=0,M.value=!0},Ve=()=>{V.value=1,M.value=!0},Ne=()=>({name:n.name,avatar:n.avatar,traits:n.traits,replyStyle:n.replyStyle,interests:n.interests}),je=()=>{try{const s=localStorage.getItem("chat_history"),t=localStorage.getItem("last_chat_time");if(s){const o=JSON.parse(s);if(o.forEach(m=>{m.timestamp&&(m.timestamp=new Date(m.timestamp))}),o&&o.length>0){if(i.value=o,t){F.value=new Date(parseInt(t));const m=new Date;m.setHours(m.getHours()-1),F.value<m&&(U.value=!0)}return}}i.value=[{content:`å—¨ï¼æˆ‘æ˜¯${n.name}ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼ä»Šå¤©æƒ³èŠäº›ä»€ä¹ˆå‘¢ï¼Ÿ`,sender:"assistant",timestamp:new Date}]}catch(s){console.error("åŠ è½½èŠå¤©å†å²å¤±è´¥:",s),i.value=[{content:`å—¨ï¼æˆ‘æ˜¯${n.name}ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼ä»Šå¤©æƒ³èŠäº›ä»€ä¹ˆå‘¢ï¼Ÿ`,sender:"assistant",timestamp:new Date}]}},pe=()=>{try{localStorage.setItem("chat_history",JSON.stringify(i.value)),localStorage.setItem("last_chat_time",Date.now().toString())}catch(s){console.error("ä¿å­˜èŠå¤©å†å²å¤±è´¥:",s)}},se=s=>{if(!s)return"";const t=new Date,o=new Date(t.getFullYear(),t.getMonth(),t.getDate()),m=new Date(o);return m.setDate(m.getDate()-1),s>=o?`ä»Šå¤© ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`:s>=m?`æ˜¨å¤© ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`:`${s.getFullYear()}-${(s.getMonth()+1).toString().padStart(2,"0")}-${s.getDate().toString().padStart(2,"0")} ${s.getHours().toString().padStart(2,"0")}:${s.getMinutes().toString().padStart(2,"0")}`},Ue=()=>{U.value=!1},He=()=>{$.value=!0},Pe=()=>{$.value=!1,me()},me=()=>{i.value=[{content:`å—¨ï¼æˆ‘æ˜¯${n.name}ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼ä»Šå¤©æƒ³èŠäº›ä»€ä¹ˆå‘¢ï¼Ÿ`,sender:"assistant",timestamp:new Date}],U.value=!1,p("happy"),pe()},ze=()=>{try{let s=`# ä¸${n.name}çš„èŠå¤©è®°å½•
`;s+=`å¯¼å‡ºæ—¶é—´ï¼š${se(new Date)}

`,i.value.forEach(X=>{const Ee=X.timestamp?se(X.timestamp):"",Re=X.sender==="user"?"æˆ‘":n.name;s+=`[${Ee}] ${Re}ï¼š${X.content}

`});const t=new Blob([s],{type:"text/plain;charset=utf-8"}),o=URL.createObjectURL(t),m=document.createElement("a"),z=new Date,J=`chat_with_${n.name}_${z.getFullYear()}${(z.getMonth()+1).toString().padStart(2,"0")}${z.getDate().toString().padStart(2,"0")}.txt`;m.href=o,m.download=J,m.click(),URL.revokeObjectURL(o)}catch(s){console.error("å¯¼å‡ºèŠå¤©è®°å½•å¤±è´¥:",s),alert("å¯¼å‡ºèŠå¤©è®°å½•å¤±è´¥")}},ye=()=>{x.value=!x.value,x.value?(de(),G(),C.value=!0,Be(),p("happy"),R.value=120,document.body.style.overflow="hidden"):(Fe(),R.value=100,document.body.style.overflow="auto")},Be=()=>{P.value&&clearInterval(P.value);const s=()=>3e3+Math.random()*5e3,t=()=>{const m=n.mood;n.mood="blink",setTimeout(()=>{n.mood=m},200)},o=()=>{P.value=setTimeout(()=>{t(),o()},s())};o()},Fe=()=>{P.value&&(clearInterval(P.value),P.value=null)};ee(()=>i.value.slice(-3));const ae=ee(()=>i.value.length>0?i.value[i.value.length-1]:null),Oe=()=>{const s=x.value;x.value=!1,M.value=!0;const t=setInterval(()=>{!M.value&&s&&(x.value=!0,clearInterval(t))},100)};return(s,t)=>(v(),u("div",{class:h(["assistant-container",{"fullscreen-mode":x.value}])},[x.value?(v(),u("div",Kt,[e("div",{class:"fullscreen-settings"},[e("button",{class:"fullscreen-settings-btn",onClick:Oe},t[31]||(t[31]=[e("span",null,"âš™ï¸",-1)]))]),e("div",Lt,[e("div",{class:"eye left",style:ne({transform:`scale(${R.value/100})`})},[e("div",{class:h(["iris",n.mood])},t[32]||(t[32]=[e("div",{class:"pupil"},null,-1),e("div",{class:"highlight"},null,-1)]),2),e("div",{class:h(["eyelid",{blink:n.mood==="blink"}])},null,2)],4),e("div",{class:"eye right",style:ne({transform:`scale(${R.value/100})`})},[e("div",{class:h(["iris",n.mood])},t[33]||(t[33]=[e("div",{class:"pupil"},null,-1),e("div",{class:"highlight"},null,-1)]),2),e("div",{class:h(["eyelid",{blink:n.mood==="blink"}])},null,2)],4)]),e("div",qt,[k.value?(v(),u("div",Gt,t[34]||(t[34]=[e("div",{class:"voice-waves"},[e("span"),e("span"),e("span"),e("span"),e("span")],-1),N(" æ­£åœ¨è†å¬... ")]))):D.value?(v(),u("div",Yt,t[35]||(t[35]=[e("div",{class:"voice-waves"},[e("span"),e("span"),e("span"),e("span"),e("span")],-1),N(" æ­£åœ¨è¯´è¯... ")]))):f.value?(v(),u("div",Wt,t[36]||(t[36]=[e("div",{class:"thinking-dots"},[e("span"),e("span"),e("span")],-1),N(" æ­£åœ¨æ€è€ƒ... ")]))):(v(),u("div",Qt," ç‚¹å‡»å¼€å§‹è¯´è¯ "))]),g.value?(v(),u("div",Xt,' "'+c(g.value)+'" ',1)):w("",!0),i.value.length>0?(v(),u("div",Zt,[e("div",es,[ae.value?(v(),u("div",{key:0,class:h(["fullscreen-message",ae.value.sender])},c(ae.value.content),3)):w("",!0)])])):w("",!0),e("div",{class:"press-to-talk-area",onMousedown:L,onMouseup:O,onTouchstart:Z(L,["prevent"]),onTouchend:Z(O,["prevent"]),onMouseleave:t[0]||(t[0]=o=>k.value?O():null)},null,32),e("button",{class:"exit-fullscreen-btn",onClick:ye}," Ã— ")])):w("",!0),_(e("div",ts,[e("div",ss,[e("div",as,[n.avatar?(v(),u("div",os,[e("img",{src:n.avatar,alt:"å¤´åƒ",class:"avatar",onClick:G},null,8,ns),e("div",{class:h(["mood-indicator small",n.mood])},c(re()),3)])):(v(),u("div",{key:1,class:"mood-avatar",onClick:G},[e("div",{class:h(["mood-indicator large",n.mood])},c(re()),3)]))]),e("div",ls,[e("h2",null,c(n.name),1),e("p",is,c(n.personality),1),e("div",rs,[t[37]||(t[37]=e("span",null,"äº’åŠ¨åº¦:",-1)),e("div",us,[e("div",{class:"level-progress",style:ne({width:`${n.intimacy}%`})},null,4)]),e("span",null,c(n.intimacy)+"%",1)]),e("div",vs,[e("button",{onClick:ce,class:h(["voice-toggle",{active:C.value}])},c(C.value?"ğŸ”Š":"ğŸ”‡")+" è¯­éŸ³"+c(C.value?"å·²å¼€å¯":"å·²å…³é—­"),3),!y.value&&C.value?(v(),u("div",ds,[t[38]||(t[38]=e("span",{class:"tip-text"},"ç‚¹å‡»å¤´åƒæˆ–æ­¤å¤„æ¿€æ´»è¯­éŸ³",-1)),e("button",{class:"activate-btn",onClick:G},"æ¿€æ´»è¯­éŸ³")])):w("",!0)]),e("div",{class:"quick-settings"},[e("button",{class:"quick-setting-btn",onClick:De},t[39]||(t[39]=[e("span",null,"ğŸ‘¤ ä¸ªæ€§è®¾ç½®",-1)])),e("button",{class:"quick-setting-btn",onClick:Ve},t[40]||(t[40]=[e("span",null,"ğŸ”Š è¯­éŸ³è®¾ç½®",-1)]))]),A.value?(v(),u("div",ps,[t[41]||(t[41]=e("span",{class:"status-indicator connected"},"âœ“",-1)),t[42]||(t[42]=N(" å·²è¿æ¥AI ")),e("button",{onClick:Se,class:"reset-key"},"é‡ç½®")])):(v(),u("div",cs,[_(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=o=>B.value=o),placeholder:"è¯·è¾“å…¥DeepSeek API Key",class:"api-key-input"},null,512),[[K,B.value]]),e("button",{onClick:be,class:"api-key-button"},"ä¿å­˜")]))])]),e("div",{class:"chat-container",ref_key:"chatContainer",ref:S},[U.value?(v(),u("div",ms,[e("div",ys,[e("p",null,"å·²åŠ è½½ä¸Šæ¬¡çš„èŠå¤©è®°å½• ("+c(se(F.value))+")",1),e("div",{class:"history-actions"},[e("button",{class:"history-action-btn",onClick:Ue}," ç»§ç»­èŠå¤© "),e("button",{class:"history-action-btn clear",onClick:me}," å¼€å§‹æ–°å¯¹è¯ ")])])])):w("",!0),(v(!0),u(Y,null,W(i.value,(o,m)=>(v(),u("div",{key:m,class:h(["message",o.sender==="user"?"user-message":"assistant-message"])},[e("div",gs,[N(c(o.content)+" ",1),o.sender==="assistant"?(v(),u("button",{key:0,onClick:z=>q(o.content),class:h(["speak-button",{speaking:D.value}]),title:"æ’­æ”¾è¯­éŸ³"},c(D.value?"ğŸ”Š":"ğŸ”ˆ"),11,fs)):w("",!0)]),e("div",ks,c($e(o.timestamp)),1)],2))),128)),r.value?(v(),u("div",bs,t[43]||(t[43]=[e("div",{class:"typing-indicator"},[e("span"),e("span"),e("span")],-1)]))):w("",!0)],512),e("div",Ss,[e("div",$s,[e("button",{class:"action-button",onClick:t[2]||(t[2]=o=>p("happy"))},t[44]||(t[44]=[e("span",null,"ğŸ˜Š",-1)])),e("button",{class:"action-button",onClick:t[3]||(t[3]=o=>p("sad"))},t[45]||(t[45]=[e("span",null,"ğŸ˜”",-1)])),e("button",{class:"action-button",onClick:t[4]||(t[4]=o=>p("surprised"))},t[46]||(t[46]=[e("span",null,"ğŸ˜®",-1)])),e("div",hs,[t[47]||(t[47]=e("button",{class:"action-button more-toggle"},[e("span",null,"â‹¯")],-1)),e("div",ws,[e("button",{class:"emotion-item",onClick:t[5]||(t[5]=o=>p("loving"))},"ğŸ˜"),e("button",{class:"emotion-item",onClick:t[6]||(t[6]=o=>p("thinking"))},"ğŸ¤”"),e("button",{class:"emotion-item",onClick:t[7]||(t[7]=o=>p("shy"))},"ğŸ˜³"),e("button",{class:"emotion-item",onClick:t[8]||(t[8]=o=>p("cool"))},"ğŸ˜"),e("button",{class:"emotion-item",onClick:t[9]||(t[9]=o=>p("playful"))},"ğŸ˜œ"),e("button",{class:"emotion-item",onClick:t[10]||(t[10]=o=>p("sleepy"))},"ğŸ˜´"),e("button",{class:"emotion-item",onClick:t[11]||(t[11]=o=>p("confused"))},"ğŸ˜•"),e("button",{class:"emotion-item",onClick:t[12]||(t[12]=o=>p("amazed"))},"ğŸ¤©"),e("button",{class:"emotion-item",onClick:t[13]||(t[13]=o=>p("worried"))},"ğŸ˜Ÿ")])])]),_(e("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>a.value=o),onKeyup:Le(te,["enter"]),placeholder:"å‘é€æ¶ˆæ¯...",class:"message-input",disabled:k.value},null,40,Cs),[[K,a.value]]),e("button",{class:h(["voice-input-button",{recording:k.value}]),onMousedown:L,onMouseup:O,onMouseleave:t[15]||(t[15]=o=>k.value?O():null),onTouchstart:Z(L,["prevent"]),onTouchend:Z(O,["prevent"]),disabled:!I.value||r.value,title:I.value?"æŒ‰ä½è¯´è¯":"æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«"},t[48]||(t[48]=[e("span",{class:"voice-icon"},"ğŸ¤",-1)]),42,_s),e("button",{class:"send-button",onClick:te,disabled:r.value||!a.value.trim()&&!g.value},c(r.value?"ç”Ÿæˆä¸­...":"å‘é€"),9,As)]),g.value?(v(),u("div",Is,[e("div",xs,"æ­£åœ¨è¯†åˆ«: "+c(g.value),1)])):w("",!0),e("div",Ts,[e("button",{class:"action-btn",onClick:ze},t[49]||(t[49]=[e("span",null,"ğŸ’¾",-1),N(" å¯¼å‡ºèŠå¤©è®°å½• ")])),e("button",{class:"action-btn clear",onClick:He},t[50]||(t[50]=[e("span",null,"ğŸ”„",-1),N(" é‡æ–°å¼€å§‹èŠå¤© ")])),e("button",{class:"action-btn fullscreen",onClick:ye},[e("span",null,c(x.value?"ğŸ”™":"ğŸ“º"),1),N(" "+c(x.value?"é€€å‡ºå…¨å±":"å…¨å±æ¨¡å¼"),1)])])],512),[[le,!x.value]]),b.value?(v(),u("div",Ms,[e("div",{class:"voice-error-overlay",onClick:t[16]||(t[16]=o=>b.value=null)}),e("div",Ds,[e("div",Vs,[t[51]||(t[51]=e("h3",null,"è¯­éŸ³è¯†åˆ«å‡ºé”™",-1)),e("button",{class:"voice-error-close",onClick:t[17]||(t[17]=o=>b.value=null)},"Ã—")]),e("div",Ns,[e("p",null,c(b.value),1),t[52]||(t[52]=e("p",{class:"voice-error-help"},[N(" å¯èƒ½çš„åŸå› : "),e("ul",null,[e("li",null,"æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½"),e("li",null,"æœªæˆäºˆéº¦å…‹é£æƒé™"),e("li",null,"æµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶"),e("li",null,"ç½‘ç»œè¿æ¥é—®é¢˜")])],-1)),t[53]||(t[53]=e("p",{class:"voice-error-tip"},"æ¨èä½¿ç”¨ Chrome æˆ– Edge æœ€æ–°ç‰ˆæœ¬æµè§ˆå™¨ï¼Œå¹¶ç¡®ä¿ç½‘é¡µé€šè¿‡HTTPSåŠ è½½",-1))]),e("div",js,[e("button",{class:"voice-error-btn",onClick:t[18]||(t[18]=o=>b.value=null)},"æˆ‘çŸ¥é“äº†")])])])):w("",!0),M.value?(v(),u("div",Us,[e("div",{class:"modal-overlay",onClick:t[19]||(t[19]=o=>M.value=!1)}),e("div",Hs,[e("button",{class:"modal-close",onClick:t[20]||(t[20]=o=>M.value=!1)},"Ã—"),e("div",Ps,[e("div",zs,[e("button",{class:h(["tab-button",{active:V.value===0}]),onClick:t[21]||(t[21]=o=>Q(0))}," ä¸ªæ€§è®¾ç½® ",2),e("button",{class:h(["tab-button",{active:V.value===1}]),onClick:t[22]||(t[22]=o=>Q(1))}," è¯­éŸ³è®¾ç½® ",2)]),e("div",Bs,[_(e("div",Fs,[qe(Jt,{initialSettings:Ne(),onSave:Te,onCancel:t[23]||(t[23]=o=>M.value=!1)},null,8,["initialSettings"])],512),[[le,V.value===0]]),_(e("div",Os,[e("div",Es,[t[58]||(t[58]=e("h2",null,"è¯­éŸ³è®¾ç½®",-1)),e("div",Rs,[t[55]||(t[55]=e("label",null,"è‡ªåŠ¨æ’­æ”¾è¯­éŸ³",-1)),e("div",Js,[_(e("input",{type:"checkbox",id:"auto-speak","onUpdate:modelValue":t[24]||(t[24]=o=>C.value=o),onChange:ce},null,544),[[Ge,C.value]]),t[54]||(t[54]=e("label",{for:"auto-speak"},null,-1))])]),e("div",Ks,[e("label",null,"éŸ³é‡ ("+c(Math.round(j.value*100))+"%)",1),_(e("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":t[25]||(t[25]=o=>j.value=o),onChange:t[26]||(t[26]=o=>Ce(j.value)),class:"volume-slider"},null,544),[[K,j.value]])]),e("div",Ls,[t[57]||(t[57]=e("label",null,"å‘è¨€äººé€‰æ‹©",-1)),_(e("select",{"onUpdate:modelValue":t[27]||(t[27]=o=>E.value=o),onChange:Me,class:"voice-select"},t[56]||(t[56]=[Ye('<optgroup label="ä¸­æ–‡å¥³å£°" data-v-04aea663><option value="youxiaoqin" data-v-04aea663>æœ‰å°æ² - ç”œç¾å¥³å£°</option><option value="youxiaoxun" data-v-04aea663>æœ‰å°è–° - æ¸©æŸ”å¥³å£°</option><option value="youxiaofu" data-v-04aea663>æœ‰å°èŠ™ - æ´»æ³¼å¥³å£°</option><option value="youyuting" data-v-04aea663>æœ‰é›¨å©· - æˆç†Ÿå¥³å£°</option><option value="youxiaobei" data-v-04aea663>æœ‰å°è´ - å¯çˆ±å¥³å£°</option></optgroup><optgroup label="ä¸­æ–‡ç”·å£°" data-v-04aea663><option value="youxiaozhi" data-v-04aea663>æœ‰å°æ™º - é˜³å…‰ç”·å£°</option><option value="youxiaohao" data-v-04aea663>æœ‰å°æµ© - æˆç†Ÿç”·å£°</option><option value="youxiaonan" data-v-04aea663>æœ‰å°æ¥  - æ¸©å’Œç”·å£°</option><option value="youxiaoke" data-v-04aea663>æœ‰å°è¯¾ - æ•™å­¦ç”·å£°</option></optgroup><optgroup label="è‹±æ–‡å¥³å£°" data-v-04aea663><option value="youxiaomei" data-v-04aea663>æœ‰å°ç¾ - ç¾å¼è‹±è¯­</option><option value="youxiaoying" data-v-04aea663>æœ‰å°è‹± - è‹±å¼è‹±è¯­</option><option value="youyating" data-v-04aea663>æœ‰é›…å©· - ç¾å¼è‹±è¯­</option><option value="Saila" data-v-04aea663>Saila - è‹±å¼è‹±è¯­</option><option value="Auriana" data-v-04aea663>Auriana - è‹±å¼è‹±è¯­</option></optgroup><optgroup label="è‹±æ–‡ç”·å£°" data-v-04aea663><option value="youxiaoguan" data-v-04aea663>æœ‰å°å®˜ - è‹±å¼è‹±è¯­</option></optgroup><optgroup label="å…¶ä»–è¯­è¨€" data-v-04aea663><option value="youkejiang" data-v-04aea663>æœ‰å¯é…± - æ—¥è¯­å¥³å£°</option><option value="yuantianjun" data-v-04aea663>åŸç”°å› - æ—¥è¯­ç”·å£°</option><option value="piaozhiyou" data-v-04aea663>æœ´æ™ºå¹¼ - éŸ©è¯­å¥³å£°</option><option value="piaotaiyan" data-v-04aea663>æœ´æ³°è¨€ - éŸ©è¯­ç”·å£°</option></optgroup>',5)]),544),[[We,E.value]])]),e("div",qs,[e("button",{class:"test-voice-btn",onClick:t[28]||(t[28]=o=>q("å—¨ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯­éŸ³~"))}," æµ‹è¯•è¯­éŸ³ ")])])],512),[[le,V.value===1]])])])])])):w("",!0),$.value?(v(),u("div",Gs,[e("div",{class:"modal-overlay",onClick:t[29]||(t[29]=o=>$.value=!1)}),e("div",Ys,[t[59]||(t[59]=e("h3",null,"ç¡®è®¤é‡æ–°å¼€å§‹èŠå¤©ï¼Ÿ",-1)),t[60]||(t[60]=e("p",null,"å½“å‰çš„æ‰€æœ‰èŠå¤©è®°å½•å°†è¢«æ¸…ç©ºï¼Œä¸”æ— æ³•æ¢å¤ã€‚",-1)),e("div",Ws,[e("button",{class:"cancel-btn",onClick:t[30]||(t[30]=o=>$.value=!1)},"å–æ¶ˆ"),e("button",{class:"confirm-btn",onClick:Pe},"ç¡®è®¤æ¸…ç©º")])])])):w("",!0)],2))}},ta=ge(Qs,[["__scopeId","data-v-04aea663"]]);export{ta as default};
