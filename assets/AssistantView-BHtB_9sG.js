import{_ as fe,r as be,a as v,w as ke,c as se,b as r,o as u,d as e,e as C,f as k,v as B,n as g,g as V,F as W,h as Y,t as c,i as oe,u as Je,j as Ge,k as ne,l as G,m as ye,p as te,q as We,s as Ye,x as Qe,y as Xe,z as ge}from"./index-D43yhpX6.js";import{T as Ze}from"./TTSService-5y14CH6h.js";import{V as et}from"./VoiceService-DKBGZCSk.js";const Se="/assets/default-avatar-BtFce_n2.png",tt={class:"settings-form"},st={class:"ai-generate-section"},at=["disabled"],lt={key:0,class:"loading-dots"},ot={key:0,class:"ai-warning"},nt={class:"form-section"},it={class:"form-group"},rt={class:"form-group"},ut={class:"avatar-selection"},vt={class:"custom-avatar-upload"},ct=["src"],dt={key:1,class:"no-avatar-placeholder"},pt={class:"avatar-actions"},mt={class:"upload-btn"},yt={class:"form-section"},gt={class:"personality-traits"},ft=["onClick"],bt={class:"form-section"},kt={class:"form-group"},St={class:"radio-group"},$t={class:"radio-label"},ht={class:"radio-label"},Ct={class:"radio-label"},_t={class:"form-group"},wt={class:"preview-section"},It={class:"preview-card"},At={class:"preview-avatar"},xt=["src"],Ft={class:"preview-info"},Tt={class:"preview-traits"},Mt={class:"preview-interests"},Vt={class:"preview-message"},Et={class:"message-bubble"},jt={class:"form-actions"},zt={key:0,class:"modal"},Dt={class:"modal-container"},Rt={class:"ai-generate-form"},Ut={class:"form-group"},qt={class:"ai-examples"},Nt=["onClick"],Pt={class:"form-actions"},Ot=["disabled"],Bt={__name:"AssistantSettingsForm",props:{initialSettings:{type:Object,default:()=>({name:"å°çˆ±",avatar:"",traits:["æ¸©æŸ”","ä½“è´´","å–„è§£äººæ„"],replyStyle:"sweet",interests:["çœ‹ä¹¦","å¬éŸ³ä¹","æ—…è¡Œ"]})}},emits:["save","cancel"],setup(ie,{emit:M}){const I=ie,U=M,n=be({name:I.initialSettings.name,avatar:I.initialSettings.avatar,traits:[...I.initialSettings.traits],replyStyle:I.initialSettings.replyStyle,interests:[...I.initialSettings.interests]}),x=v(I.initialSettings.interests.join("ã€"));ke(x,p=>{n.interests=p.split("ã€").filter(s=>s.trim()!=="")});const T=["æ¸©æŸ”","ä½“è´´","å–„è§£äººæ„","è°ƒçš®","æ´»æ³¼","å¼€æœ—","å®³ç¾","æ–‡é™","æµªæ¼«","è´´å¿ƒ","èªæ˜","æœ‰è¶£","å¯çˆ±","æˆç†Ÿ","ç‹¬ç«‹","ä¾èµ–","åšå¼º","ç‡çœŸ"],S=p=>{const s=n.traits.indexOf(p);s===-1?n.traits.length<5&&n.traits.push(p):n.traits.splice(s,1)},F=se(()=>{const p={sweet:`å—¨~ æˆ‘æ˜¯${n.name||"å°çˆ±"}ï¼Œå¾ˆå¼€å¿ƒè®¤è¯†ä½ ï¼å¸Œæœ›èƒ½å’Œä½ èŠå¾ˆå¤šæœ‰è¶£çš„äº‹æƒ…å‘¢~ ğŸ’•`,casual:`ä½ å¥½ï¼æˆ‘å«${n.name||"å°çˆ±"}ã€‚å¹³æ—¶æˆ‘å–œæ¬¢${n.interests[0]||"èŠå¤©"}ï¼Œä½ å‘¢ï¼Ÿ`,playful:`å“å‘€ï¼Œç»ˆäºç­‰åˆ°ä½ å•¦ï¼æˆ‘æ˜¯${n.name||"å°çˆ±"}ï¼æˆ‘è¶…çº§å–œæ¬¢${n.interests[0]||"ç©æ¸¸æˆ"}çš„ï¼è¦ä¸€èµ·èŠèŠå—ï¼Ÿ`};return p[n.replyStyle]||p.sweet}),$=v(localStorage.getItem("custom_avatar")||""),q=p=>{const s=p.target.files[0];if(!s)return;if(!s.type.match("image.*")){alert("è¯·ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶");return}if(s.size>2*1024*1024){alert("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡2MB");return}const i=new FileReader;i.onload=d=>{$.value=d.target.result,n.avatar=$.value,localStorage.setItem("custom_avatar",$.value)},i.readAsDataURL(s)},f=()=>{$.value="",n.avatar="",localStorage.removeItem("custom_avatar")},y=()=>{n.avatar===$.value&&localStorage.setItem("custom_avatar",$.value),U("save",{...n})},A=v(!1),h=v(""),b=v(!1),l=se(()=>!!localStorage.getItem("deepseek_apikey")),w=["ä¸€ä¸ªæ¸©æŸ”ä½“è´´çš„å¥³å‹ï¼Œæ€§æ ¼ç”œç¾ï¼Œå–œæ¬¢è¯»ä¹¦å’Œç¾é£Ÿï¼Œæ€»æ˜¯èƒ½ç»™äººæ¸©æš–å’Œæ”¯æŒ","æ´»æ³¼å¼€æœ—çš„å¥³å­©ï¼Œçƒ­çˆ±æˆ·å¤–è¿åŠ¨ï¼Œè¯´è¯é£æ ¼ä¿çš®å¹½é»˜ï¼Œå¯¹ä¸–ç•Œå……æ»¡å¥½å¥‡","æˆç†Ÿç¨³é‡çš„çŸ¥æ€§å¥³æ€§ï¼Œå–œæ¬¢è‰ºæœ¯å’Œå†å²ï¼Œå–„äºå€¾å¬å’Œç»™å‡ºå»ºè®®ï¼Œè°ˆåä¼˜é›…","é«˜å†·å¤–è¡¨ä¸‹å†…å¿ƒæ¸©æŸ”çš„å¥³å‹ï¼Œå–œæ¬¢éŸ³ä¹å’Œç”µå½±ï¼Œä¸å–„è¨€è¾ä½†å¾ˆç»†å¿ƒä½“è´´","å¯çˆ±ä¿çš®çš„å¥³ç”Ÿï¼Œå–œæ¬¢åŠ¨æ¼«å’Œæ¸¸æˆï¼Œè¯´è¯æ–¹å¼å¯çˆ±ï¼Œç»å¸¸ä½¿ç”¨è¡¨æƒ…å’Œé¢œæ–‡å­—"],H=()=>{A.value=!0,h.value=""},Q=async()=>{if(!(!h.value.trim()||b.value)){b.value=!0;try{const p=localStorage.getItem("deepseek_apikey");if(!p){alert("è¯·å…ˆåœ¨ä¸»é¡µé¢è®¾ç½®DeepSeek API Key"),b.value=!1;return}const s=`ä½ æ˜¯ä¸€ä¸ªè§’è‰²è®¾è®¡ä¸“å®¶ã€‚è¯·æ ¹æ®ä¸‹é¢çš„æè¿°ï¼Œç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„è§’è‰²è®¾ç½®ï¼ŒåŒ…æ‹¬åå­—ã€æ€§æ ¼ç‰¹ç‚¹(æœ€å¤š5ä¸ªç‰¹ç‚¹)ã€å¯¹è¯é£æ ¼(ç”œç¾æ¸©æŸ”/éšæ€§è‡ªç„¶/è°ƒçš®ä¿çš®ä¸‰é€‰ä¸€)å’Œå…´è¶£çˆ±å¥½(æœ€å¤š5ä¸ª)ã€‚
è¯·æŒ‰ç…§ä»¥ä¸‹ä¸¥æ ¼çš„JSONæ ¼å¼è¿”å›ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—è§£é‡Šï¼š

{
  "name": "è§’è‰²åå­—",
  "traits": ["æ€§æ ¼ç‰¹ç‚¹1", "æ€§æ ¼ç‰¹ç‚¹2", "æ€§æ ¼ç‰¹ç‚¹3"],
  "replyStyle": "ç”œç¾æ¸©æŸ”", 
  "interests": ["å…´è¶£1", "å…´è¶£2", "å…´è¶£3"]
}

æè¿°ï¼š${h.value}`,i=await fetch("https://api.deepseek.com/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"system",content:"ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è§’è‰²è®¾è®¡åŠ©æ‰‹ï¼Œæ ¹æ®ç”¨æˆ·çš„æè¿°ç”Ÿæˆè§’è‰²è®¾ç½®ï¼Œé™å®šåœ¨JSONæ ¼å¼å†…è¿”å›ã€‚"},{role:"user",content:s}]})});if(!i.ok)throw new Error(`APIé”™è¯¯: ${i.status}`);const j=(await i.json()).choices[0].message.content;try{const N=j.match(/\{[\s\S]*\}/);if(!N)throw new Error("æ— æ³•æå–JSONæ•°æ®");const _=JSON.parse(N[0]);if(n.name=_.name||n.name,_.traits&&Array.isArray(_.traits)){const z=_.traits.filter(E=>T.includes(E)).slice(0,5);z.length>0&&(n.traits=z)}_.replyStyle&&["sweet","casual","playful"].includes(_.replyStyle)&&(n.replyStyle=_.replyStyle),_.interests&&Array.isArray(_.interests)&&(n.interests=_.interests.slice(0,5),x.value=n.interests.join("ã€")),A.value=!1}catch(N){console.error("è§£æAIç”Ÿæˆçš„è®¾ç½®å¤±è´¥:",N),alert("æ— æ³•è§£æAIç”Ÿæˆçš„è®¾ç½®ï¼Œè¯·é‡è¯•")}}catch(p){console.error("AIè®¾ç½®ç”Ÿæˆå¤±è´¥:",p),alert("AIè®¾ç½®ç”Ÿæˆå¤±è´¥: "+p.message)}finally{b.value=!1}}};return(p,s)=>(u(),r("div",tt,[s[29]||(s[29]=e("h2",{class:"form-title"},"è‡ªå®šä¹‰ä½ çš„å°çˆ±åŠ©æ‰‹",-1)),e("div",st,[e("button",{class:"ai-generate-btn",onClick:H,disabled:!l.value||b.value},[s[12]||(s[12]=e("span",null,"ğŸ¤– ä½¿ç”¨AIè®¾ç½®åŠ©æ‰‹",-1)),b.value?(u(),r("span",lt,s[11]||(s[11]=[e("span",null,".",-1),e("span",null,".",-1),e("span",null,".",-1)]))):C("",!0)],8,at),l.value?C("",!0):(u(),r("p",ot,"éœ€è¦å…ˆåœ¨ä¸»é¡µé¢è®¾ç½®DeepSeek API Key"))]),e("div",nt,[s[16]||(s[16]=e("h3",null,"åŸºæœ¬ä¿¡æ¯",-1)),e("div",it,[s[13]||(s[13]=e("label",{for:"name"},"åå­—",-1)),k(e("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=i=>n.name=i),placeholder:"è¾“å…¥åŠ©æ‰‹çš„åå­—"},null,512),[[B,n.name]])]),e("div",rt,[s[15]||(s[15]=e("label",{for:"avatar"},"å¤´åƒ",-1)),e("div",ut,[e("div",vt,[$.value?(u(),r("img",{key:0,src:$.value,class:g(["avatar-option",n.avatar===$.value?"selected":""]),onClick:s[1]||(s[1]=i=>n.avatar=$.value),alt:"è‡ªå®šä¹‰å¤´åƒ"},null,10,ct)):(u(),r("div",dt," è¿˜æ²¡æœ‰å¤´åƒ ")),e("div",pt,[e("label",mt,[s[14]||(s[14]=V(" ä¸Šä¼ è‡ªå®šä¹‰å¤´åƒ ")),e("input",{type:"file",accept:"image/*",class:"file-input",onChange:q},null,32)]),$.value?(u(),r("button",{key:0,class:"delete-btn",onClick:f,type:"button"}," åˆ é™¤å¤´åƒ ")):C("",!0)])])])])]),e("div",yt,[s[17]||(s[17]=e("h3",null,"æ€§æ ¼ç‰¹ç‚¹",-1)),e("div",gt,[(u(),r(W,null,Y(T,(i,d)=>e("div",{key:d,class:g(["trait-option",n.traits.includes(i)?"selected":""]),onClick:j=>S(i)},c(i),11,ft)),64))])]),e("div",bt,[s[23]||(s[23]=e("h3",null,"å¯¹è¯é£æ ¼",-1)),e("div",kt,[s[21]||(s[21]=e("label",null,"å›å¤æ–¹å¼",-1)),e("div",St,[e("label",$t,[k(e("input",{type:"radio",value:"sweet","onUpdate:modelValue":s[2]||(s[2]=i=>n.replyStyle=i)},null,512),[[oe,n.replyStyle]]),s[18]||(s[18]=e("span",null,"ç”œç¾æ¸©æŸ”",-1))]),e("label",ht,[k(e("input",{type:"radio",value:"casual","onUpdate:modelValue":s[3]||(s[3]=i=>n.replyStyle=i)},null,512),[[oe,n.replyStyle]]),s[19]||(s[19]=e("span",null,"éšæ€§è‡ªç„¶",-1))]),e("label",Ct,[k(e("input",{type:"radio",value:"playful","onUpdate:modelValue":s[4]||(s[4]=i=>n.replyStyle=i)},null,512),[[oe,n.replyStyle]]),s[20]||(s[20]=e("span",null,"è°ƒçš®ä¿çš®",-1))])])]),e("div",_t,[s[22]||(s[22]=e("label",{for:"interests"},"å…´è¶£çˆ±å¥½ (å¤šé€‰ï¼Œç”¨é€—å·åˆ†éš”)",-1)),k(e("input",{type:"text",id:"interests","onUpdate:modelValue":s[5]||(s[5]=i=>x.value=i),placeholder:"ä¾‹å¦‚ï¼šçœ‹ä¹¦ã€å¬éŸ³ä¹ã€æ—…è¡Œ"},null,512),[[B,x.value]])])]),e("div",wt,[s[24]||(s[24]=e("h3",null,"é¢„è§ˆ",-1)),e("div",It,[e("div",At,[e("img",{src:n.avatar||Je(Se),alt:"åŠ©æ‰‹å¤´åƒ"},null,8,xt)]),e("div",Ft,[e("h4",null,c(n.name||"æœªå‘½å"),1),e("p",Tt,[(u(!0),r(W,null,Y(n.traits,(i,d)=>(u(),r("span",{key:d},c(i)+c(d<n.traits.length-1?"ã€":""),1))),128))]),e("div",Mt,[(u(!0),r(W,null,Y(n.interests,(i,d)=>(u(),r("span",{key:d,class:"interest-tag"},c(i),1))),128))]),e("div",Vt,[e("div",Et,c(F.value),1)])])])]),e("div",jt,[e("button",{class:"cancel-btn",onClick:s[6]||(s[6]=i=>p.$emit("cancel"))},"å–æ¶ˆ"),e("button",{class:"save-btn",onClick:y},"ä¿å­˜è®¾ç½®")]),A.value?(u(),r("div",zt,[e("div",{class:"modal-overlay",onClick:s[7]||(s[7]=i=>A.value=!1)}),e("div",Dt,[e("button",{class:"modal-close",onClick:s[8]||(s[8]=i=>A.value=!1)},"Ã—"),s[28]||(s[28]=e("h3",null,"AIè®¾ç½®åŠ©æ‰‹",-1)),e("div",Rt,[s[27]||(s[27]=e("p",{class:"ai-description"}," æè¿°ä½ æƒ³è¦çš„åŠ©æ‰‹ç±»å‹ï¼ŒAIå°†è‡ªåŠ¨ç”Ÿæˆåˆé€‚çš„è®¾ç½®ã€‚ ",-1)),e("div",Ut,[s[25]||(s[25]=e("label",{for:"aiPrompt"},"ä½ å¸Œæœ›åŠ©æ‰‹å…·æœ‰æ€æ ·çš„æ€§æ ¼å’Œç‰¹ç‚¹ï¼Ÿ",-1)),k(e("textarea",{id:"aiPrompt","onUpdate:modelValue":s[9]||(s[9]=i=>h.value=i),placeholder:"ä¾‹å¦‚ï¼šä¸€ä¸ªæ¸©æŸ”è´´å¿ƒçš„å¥³å‹ï¼Œå–œæ¬¢è‰ºæœ¯å’ŒéŸ³ä¹ï¼Œè¯´è¯é£æ ¼ç”œç¾è‡ªç„¶...",rows:"4"},null,512),[[B,h.value]])]),e("div",qt,[s[26]||(s[26]=e("p",{class:"examples-title"},"å‚è€ƒç¤ºä¾‹ï¼š",-1)),(u(),r(W,null,Y(w,(i,d)=>e("div",{key:d,class:"example-item",onClick:j=>h.value=i},c(i),9,Nt)),64))]),e("div",Pt,[e("button",{class:"cancel-btn",onClick:s[10]||(s[10]=i=>A.value=!1)},"å–æ¶ˆ"),e("button",{class:"generate-btn",onClick:Q,disabled:b.value||!h.value.trim()},c(b.value?"ç”Ÿæˆä¸­...":"ç”Ÿæˆè®¾ç½®"),9,Ot)])])])])):C("",!0)]))}},Ht=fe(Bt,[["__scopeId","data-v-32ab1a0f"]]),Lt={class:"kasilan-eyes"},Kt={class:"voice-status"},Jt={key:0,class:"voice-indicator recording"},Gt={key:1,class:"voice-indicator speaking"},Wt={key:2,class:"voice-indicator thinking"},Yt={key:3,class:"voice-indicator idle"},Qt={key:0,class:"fullscreen-recognized-text"},Xt={key:1,class:"fullscreen-messages"},Zt={class:"fullscreen-messages-container"},es=["disabled"],ts=["disabled"],ss={class:"main-content"},as={class:"assistant-profile"},ls={class:"avatar-container"},os={key:0,class:"avatar-wrapper"},ns=["src"],is={class:"profile-info"},rs={class:"personality"},us={class:"relationship-level"},vs={class:"level-bar"},cs={class:"voice-controls"},ds={key:0,class:"audio-activation-tip"},ps={key:0,class:"api-key-section"},ms={key:1,class:"api-status"},ys={key:0,class:"history-prompt"},gs={class:"history-info"},fs={class:"message-content"},bs=["onClick"],ks={class:"message-time"},Ss={key:1,class:"message assistant-message typing"},$s={class:"input-area"},hs={class:"input-actions"},Cs={class:"more-emotions"},_s={class:"emotion-dropdown"},ws=["disabled"],Is=["disabled","title"],As=["disabled"],xs={key:0,class:"recognized-text-container"},Fs={class:"recognized-text"},Ts={class:"chat-actions"},Ms={key:1,class:"voice-error-modal"},Vs={class:"voice-error-container"},Es={class:"voice-error-header"},js={class:"voice-error-content"},zs={class:"voice-error-footer"},Ds={key:2,class:"modal"},Rs={class:"modal-container"},Us={class:"settings-tabs"},qs={class:"tab-header"},Ns={class:"tab-content"},Ps={class:"tab-panel"},Os={class:"tab-panel"},Bs={class:"voice-settings-form"},Hs={class:"setting-item"},Ls={class:"toggle-switch"},Ks={class:"setting-item"},Js={class:"setting-item"},Gs={class:"setting-item"},Ws={key:3,class:"modal"},Ys={class:"modal-container confirm-modal"},Qs={class:"confirm-actions"},Xs={__name:"AssistantView",setup(ie){v(localStorage.getItem("assistant_name")||"å°çˆ±");const M=v(!1),I=v(localStorage.getItem("deepseek_apikey")||""),U=v(""),n=v(null),x=v(null),T=v(!1),S=v(localStorage.getItem("assistant_auto_speak")==="true"),F=v(parseFloat(localStorage.getItem("assistant_voice_volume")||"0.8")),$=v(!1),q=v(localStorage.getItem("assistant_voice")||"youxiaoqin"),f=v(!1),y=v(""),A=v(!1),h=v(null),b=v(!1),l=be({name:"å°çˆ±",avatar:"",personality:"æ¸©æŸ”ä½“è´´ï¼Œå–„è§£äººæ„ï¼Œå–œæ¬¢èŠå¤©å’Œåˆ†äº«ç”Ÿæ´»",mood:"happy",intimacy:35,traits:["æ¸©æŸ”ä½“è´´","å–„è§£äººæ„"],interests:["èŠå¤©å’Œåˆ†äº«ç”Ÿæ´»"],replyStyle:"sweet"}),w=v(!0),H=v(!1),Q=v(140);v("#4a90e2");const p=v(null),s=v([]),i=v(""),d=v(!1),j=v(null),N=v(null),_=v(!1),z=v(!1),E=v(0),re=a=>{E.value=a},$e=()=>{U.value.trim()&&(I.value=U.value.trim(),localStorage.setItem("deepseek_apikey",I.value),U.value="",s.value.push({content:"æˆ‘å·²ç»è¿æ¥åˆ°AIå¤§è„‘äº†ï¼Œç°åœ¨å¯ä»¥æ›´å¥½åœ°å’Œä½ èŠå¤©å•¦ï¼",sender:"assistant",timestamp:new Date}),m("happy"),D())},he=()=>{I.value="",localStorage.removeItem("deepseek_apikey")},ue=()=>{const a={happy:"ğŸ˜Š",excited:"ğŸ˜ƒ",normal:"ğŸ˜",sad:"ğŸ˜”",angry:"ğŸ˜ ",surprised:"ğŸ˜®",thinking:"ğŸ¤”",loving:"ğŸ˜",shy:"ğŸ˜³",cool:"ğŸ˜",playful:"ğŸ˜œ",sleepy:"ğŸ˜´",confused:"ğŸ˜•",amazed:"ğŸ¤©",worried:"ğŸ˜Ÿ",blink:"ğŸ˜Œ"};return a[l.mood]||a.normal},m=a=>{l.mood=a==="surprised"?"excited":a},ve=a=>{if(a.includes("ğŸ˜Š")||a.includes("é«˜å…´")||a.includes("å¼€å¿ƒ")||a.includes("ç¬‘"))m("happy");else if(a.includes("ğŸ˜¢")||a.includes("æŠ±æ­‰")||a.includes("é—æ†¾"))m("sad");else if(a.includes("ğŸ˜®")||a.includes("å“‡")||a.includes("æƒŠè®¶")||a.includes("éœ‡æƒŠ"))m("surprised");else if(a.includes("ğŸ¤”")||a.includes("æ€è€ƒ")||a.includes("å¤æ‚")||a.includes("åˆ†æ"))m("thinking");else if(a.includes("â¤ï¸")||a.includes("å–œæ¬¢")||a.includes("çˆ±"))m("loving");else if(Math.random()>.7){const t=["happy","neutral","thinking"];m(t[Math.floor(Math.random()*t.length)])}},Ce=a=>{const t=new Date(a);return`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},L=()=>{if(d.value||!i.value.trim()&&!y.value.trim())return;const a=i.value.trim()||y.value.trim();i.value="",y.value="",s.value.push({content:a,sender:"user",timestamp:new Date}),d.value=!0,b.value||(b.value=!0),I.value?xe(a):setTimeout(()=>{d.value=!1,b.value=!1;let t=Fe(a);s.value.push({content:t,sender:"assistant",timestamp:new Date}),ve(t),D(),ce()},1500)},ce=()=>{if(l.intimacy<100){const a=.5+Math.random()*1.5;l.intimacy=Math.min(100,l.intimacy+a)}},_e=()=>{n.value||(n.value=new Ze)},we=()=>{try{x.value||(x.value=new et,A.value=x.value.sttSupported,console.log("è¯­éŸ³è¯†åˆ«æ”¯æŒçŠ¶æ€:",A.value))}catch(a){console.error("åˆå§‹åŒ–è¯­éŸ³è¯†åˆ«æœåŠ¡å¤±è´¥:",a),A.value=!1}},K=()=>{if(!(!x.value||!A.value||d.value)){if(f.value){console.log("å·²ç»åœ¨å½•éŸ³ä¸­ï¼Œå¿½ç•¥é‡å¤è¯·æ±‚");return}h.value=null,f.value=!0,y.value="";try{const a=setTimeout(()=>{f.value&&!y.value&&(console.log("è¯­éŸ³è¯†åˆ«è¶…æ—¶ï¼Œè‡ªåŠ¨åœæ­¢"),P())},5e3);x.value.startRecognition(t=>{y.value=t,D(),clearTimeout(a)},t=>{y.value=t,clearTimeout(a)},t=>{if(console.error("è¯­éŸ³è¯†åˆ«é”™è¯¯:",t),t.message&&t.message.includes("already started")){console.log("æ£€æµ‹åˆ°é‡å¤å¯åŠ¨é”™è¯¯ï¼Œå°è¯•é‡ç½®..."),x.value.stopRecognition(),setTimeout(()=>{f.value?K():f.value=!1},1e3);return}f.value=!1,y.value="",h.value=t.message||"è¯­éŸ³è¯†åˆ«å‡ºé”™ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®æˆ–å°è¯•ä½¿ç”¨Chromeæµè§ˆå™¨",clearTimeout(a)})}catch(a){console.error("å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥:",a),f.value=!1,h.value=a.message||"å¯åŠ¨è¯­éŸ³è¯†åˆ«å¤±è´¥ï¼Œè¯·æ£€æŸ¥æµè§ˆå™¨è®¾ç½®"}}},P=()=>{if(f.value)try{x.value?.stopRecognition()}catch(a){console.error("åœæ­¢è¯­éŸ³è¯†åˆ«å¤±è´¥:",a)}finally{f.value=!1,y.value.trim()&&(i.value=y.value,b.value=!0,L())}},ae=async a=>{if(!(!a||!n.value)){if(!$.value){Z();return}try{T.value&&Ie(),T.value=!0,await n.value.synthesizeAndPlay(a)}catch(t){console.error("æ’­æ”¾è¯­éŸ³å¤±è´¥:",t),t.name==="NotAllowedError"?$.value=!1:t.message&&t.message.includes("Failed to load")&&s.value.push({content:"æŠ±æ­‰ï¼Œè¯­éŸ³åˆæˆå¤±è´¥äº†ï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–APIé…ç½®æœ‰è¯¯",sender:"assistant",timestamp:new Date})}finally{T.value=!1}}},Ie=()=>{n.value&&T.value&&(n.value.stopCurrentAudio(),T.value=!1)},de=()=>{S.value=!S.value,localStorage.setItem("assistant_auto_speak",S.value.toString())},Ae=a=>{F.value=parseFloat(a),localStorage.setItem("assistant_voice_volume",F.value.toString()),n.value&&n.value.setVolume(F.value)},xe=async a=>{b.value=!0;try{const t={model:"deepseek-chat",messages:[{role:"system",content:`ä½ æ˜¯ä¸€ä¸ªåå«${l.name}çš„AIåŠ©æ‰‹ï¼Œæ€§æ ¼${l.traits.join("ã€")}ï¼Œå–œæ¬¢${l.interests.join("ã€")}ã€‚
                    è¯·ç”¨${l.replyStyle}çš„è¯­æ°”å›å¤ç”¨æˆ·ï¼Œå›ç­”è¦ç®€çŸ­è‡ªç„¶ï¼Œåƒæœ‹å‹é—´çš„å¯¹è¯ï¼Œä¸è¦å¤ªè¿‡æ­£å¼ã€‚
                    ä¸è¦è‡ªç§°"AIåŠ©æ‰‹"ï¼Œè€Œæ˜¯åƒæœ‰è‡ªå·±ä¸ªæ€§çš„äººä¸€æ ·äº¤æµã€‚`},...s.value.slice(-10).map(ee=>({role:ee.sender==="user"?"user":"assistant",content:ee.content})),{role:"user",content:a}],temperature:.7,max_tokens:800},o=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${I.value}`},body:JSON.stringify(t)});if(!o.ok){const ee=await o.json();throw new Error(ee.error?.message||"è¯·æ±‚å¤±è´¥")}const R=(await o.json()).choices[0].message.content;d.value=!1,b.value=!1,s.value.push({content:R,sender:"assistant",timestamp:new Date}),ve(R),S.value&&ae(R),D(),ce()}catch(t){console.error("è°ƒç”¨DeepSeek APIå¤±è´¥:",t),d.value=!1,b.value=!1,s.value.push({content:`æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼š${t.message}`,sender:"assistant",timestamp:new Date}),m("sad"),D()}},Fe=a=>{const t=a.toLowerCase();if(t.includes("ä½ å¥½")||t.includes("å—¨"))return"å—¨ï¼å¾ˆé«˜å…´å’Œä½ èŠå¤©ï¼ğŸ˜Š";if(t.includes("åå­—"))return`æˆ‘å«${l.name}ï¼Œä½ å¯ä»¥å«æˆ‘å°çˆ±~ğŸ’•`;if(t.includes("å–œæ¬¢")||t.includes("çˆ±å¥½"))return"æˆ‘å–œæ¬¢çœ‹ä¹¦ã€å¬éŸ³ä¹ï¼Œè¿˜æœ‰å’Œä½ èŠå¤©ï¼è¿™äº›éƒ½è®©æˆ‘æ„Ÿåˆ°å¾ˆå¼€å¿ƒ~ğŸ˜Š";if(t.includes("å†è§")||t.includes("æ‹œæ‹œ"))return"æ‹œæ‹œï¼æœŸå¾…æˆ‘ä»¬ä¸‹æ¬¡èŠå¤©~ğŸ’—";if(t.includes("åƒ")||t.includes("é¥­"))return"è™½ç„¶æˆ‘ä¸éœ€è¦åƒé¥­ï¼Œä½†æˆ‘å–œæ¬¢çœ‹ä½ åƒé¥­çš„æ ·å­ï¼ŒçœŸçš„å¾ˆå¯çˆ±ï¼ğŸ½ï¸";if(t.includes("çˆ±ä½ ")||t.includes("å–œæ¬¢ä½ "))return"æˆ‘ä¹Ÿå¾ˆå–œæ¬¢ä½ å‘€ï¼å’Œä½ åœ¨ä¸€èµ·çš„æ—¶å€™ï¼Œæˆ‘æ„Ÿåˆ°å¾ˆå¹¸ç¦~â¤ï¸";if(t.includes("è¡¨æƒ…")||t.includes("ç¬‘"))return"ä½ å–œæ¬¢æˆ‘çš„è¡¨æƒ…å—ï¼Ÿæˆ‘å¯ä»¥åšå‡ºå„ç§å„æ ·çš„è¡¨æƒ…å‘¢~ ğŸ˜Š ğŸ˜® ğŸ¤”";{const o=["å—¯ï¼Œæˆ‘æ˜ç™½ä½ çš„æ„æ€äº†~ğŸ˜Š","çœŸçš„å—ï¼Ÿå¥½æœ‰è¶£ï¼ğŸ˜ƒ","æˆ‘å¾ˆå–œæ¬¢å’Œä½ èŠå¤©ï¼Œæ„Ÿè§‰æˆ‘ä»¬å¾ˆèŠå¾—æ¥~ğŸ’—","ä½ è¯´çš„è¿™ä¸ªæˆ‘å¾ˆæ„Ÿå…´è¶£ï¼Œèƒ½å‘Šè¯‰æˆ‘æ›´å¤šå—ï¼ŸğŸ¤”","æˆ‘å–œæ¬¢ä½ çš„æƒ³æ³•ï¼ğŸ‘","ä½ çœŸæ˜¯å¤ªè´´å¿ƒäº†ï¼â¤ï¸","è¿™ä¸ªè¯é¢˜å¾ˆæœ‰æ„æ€å‘¢ï¼Œæˆ‘æƒ³å¬ä½ è¯´æ›´å¤š~ğŸ˜Š","å—¯~æˆ‘åœ¨è®¤çœŸå¬ä½ è¯´è¯å“¦~ğŸ’•"];return o[Math.floor(Math.random()*o.length)]}};ke(s,()=>{D(),Pe()},{deep:!0});const D=async()=>{await ge(),j.value&&(j.value.scrollTop=j.value.scrollHeight)};Ge(()=>{D(),_e(),we(),ze(),Ne(),document.addEventListener("fullscreenchange",X),document.addEventListener("webkitfullscreenchange",X),document.addEventListener("mozfullscreenchange",X),document.addEventListener("MSFullscreenChange",X),w.value&&(pe(),m("happy"),document.body.style.overflow="hidden",setTimeout(()=>{try{S.value=!0}catch(a){console.error("åˆå§‹åŒ–éŸ³é¢‘å¤±è´¥:",a)}},1e3))});const Te=()=>{p.value&&(clearInterval(p.value),p.value=null)};se(()=>s.value.slice(-3));const le=se(()=>s.value.length>0?s.value[s.value.length-1]:null),Me=()=>{const a=w.value;w.value=!1,M.value=!0;const t=setInterval(()=>{!M.value&&a&&(w.value=!0,clearInterval(t))},100)},X=()=>{const a=!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement);H.value=a},Ve=()=>{const a=document.documentElement;a.requestFullscreen?a.requestFullscreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.msRequestFullscreen&&a.msRequestFullscreen()},Ee=()=>{document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},je=()=>{O.value=!O.value,O.value&&ge(()=>{document.querySelector(".fullscreen-message-input")&&document.querySelector(".fullscreen-message-input").focus()})},O=v(!1),ze=()=>{l.name=localStorage.getItem("assistant_name")||"å°çˆ±",l.avatar=localStorage.getItem("assistant_avatar")||Se,l.personality=localStorage.getItem("assistant_personality")||"æ¸©æŸ”ä½“è´´ï¼Œå–„è§£äººæ„ï¼Œå–œæ¬¢èŠå¤©å’Œåˆ†äº«ç”Ÿæ´»",l.mood=localStorage.getItem("assistant_mood")||"happy",l.intimacy=parseInt(localStorage.getItem("assistant_intimacy")||"35"),l.traits=localStorage.getItem("assistant_traits")?.split(",")||["æ¸©æŸ”ä½“è´´","å–„è§£äººæ„"],l.interests=localStorage.getItem("assistant_interests")?.split(",")||["èŠå¤©å’Œåˆ†äº«ç”Ÿæ´»"],l.replyStyle=localStorage.getItem("assistant_reply_style")||"sweet",S.value=localStorage.getItem("assistant_auto_speak")==="true",F.value=parseFloat(localStorage.getItem("assistant_voice_volume")||"0.8"),q.value=localStorage.getItem("assistant_voice")||"youxiaoqin"},De=a=>{l.name=a.name,l.avatar=a.avatar,l.personality=a.personality,l.mood=a.mood,l.intimacy=a.intimacy,l.traits=a.traits,l.interests=a.interests,l.replyStyle=a.replyStyle,localStorage.setItem("assistant_name",l.name),localStorage.setItem("assistant_avatar",l.avatar),localStorage.setItem("assistant_personality",l.personality),localStorage.setItem("assistant_mood",l.mood),localStorage.setItem("assistant_intimacy",l.intimacy.toString()),localStorage.setItem("assistant_traits",l.traits.join(",")),localStorage.setItem("assistant_interests",l.interests.join(",")),localStorage.setItem("assistant_reply_style",l.replyStyle),localStorage.setItem("assistant_auto_speak",S.value.toString()),localStorage.setItem("assistant_voice_volume",F.value.toString()),localStorage.setItem("assistant_voice",q.value)},Re=()=>{s.value=[],localStorage.removeItem("chat_history"),D(),z.value=!1},Ue=()=>{const a={chatHistory:s.value,settings:{name:l.name,avatar:l.avatar,personality:l.personality,mood:l.mood,intimacy:l.intimacy,traits:l.traits,interests:l.interests,replyStyle:l.replyStyle,autoSpeak:S.value,voiceVolume:F.value,selectedVoice:q.value}},t=JSON.stringify(a,null,2),o=new Blob([t],{type:"application/json"}),J=URL.createObjectURL(o),R=document.createElement("a");R.href=J,R.download="chat_history.json",R.click(),URL.revokeObjectURL(J)},qe=()=>{z.value=!0},Ne=()=>{const a=localStorage.getItem("chat_history");if(a)try{const t=JSON.parse(a);Array.isArray(t)&&t.length>0&&(s.value=t,N.value=new Date(t[t.length-1].timestamp),_.value=!0)}catch(t){console.error("è§£æèŠå¤©å†å²å¤±è´¥:",t)}},Pe=()=>{localStorage.setItem("chat_history",JSON.stringify(s.value))},Oe=()=>{_.value=!1},Be=()=>{s.value=[],localStorage.removeItem("chat_history"),_.value=!1},He=a=>{if(!a)return"";const t=new Date(a);return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`},Z=()=>{n.value&&(n.value.activateAudioContext(),$.value=!0)},pe=()=>{p.value&&clearInterval(p.value),p.value=setInterval(()=>{const a=l.mood;l.mood="blink",setTimeout(()=>{l.mood=a},200)},5e3+Math.random()*5e3)},me=()=>{w.value=!w.value,w.value?(document.body.style.overflow="hidden",pe(),m("happy")):(document.body.style.overflow="",Te())},Le=()=>{M.value=!0,E.value=0},Ke=()=>{M.value=!0,E.value=1};return(a,t)=>(u(),r("div",{class:g(["assistant-container",{"fullscreen-mode":w.value}])},[w.value?(u(),r("div",{key:0,class:g(["fullscreen-overlay",{"external-fullscreen":H.value}])},[e("div",{class:"fullscreen-settings"},[e("button",{class:"fullscreen-settings-btn",onClick:Me},t[34]||(t[34]=[e("span",null,"âš™ï¸",-1)]))]),e("div",Lt,[e("div",{class:"eye left",style:ne({transform:`scale(${Q.value/100})`})},[e("div",{class:g(["iris",l.mood])},t[35]||(t[35]=[e("div",{class:"pupil"},null,-1),e("div",{class:"highlight"},null,-1)]),2),e("div",{class:g(["eyelid",{blink:l.mood==="blink"}])},null,2)],4),e("div",{class:"eye right",style:ne({transform:`scale(${Q.value/100})`})},[e("div",{class:g(["iris",l.mood])},t[36]||(t[36]=[e("div",{class:"pupil"},null,-1),e("div",{class:"highlight"},null,-1)]),2),e("div",{class:g(["eyelid",{blink:l.mood==="blink"}])},null,2)],4)]),k(e("div",Kt,[f.value?(u(),r("div",Jt,t[37]||(t[37]=[e("div",{class:"voice-waves"},[e("span"),e("span"),e("span"),e("span"),e("span")],-1),V(" æ­£åœ¨è†å¬... ")]))):T.value?(u(),r("div",Gt,t[38]||(t[38]=[e("div",{class:"voice-waves"},[e("span"),e("span"),e("span"),e("span"),e("span")],-1),V(" æ­£åœ¨è¯´è¯... ")]))):b.value?(u(),r("div",Wt,t[39]||(t[39]=[e("div",{class:"thinking-dots"},[e("span"),e("span"),e("span")],-1),V(" æ­£åœ¨æ€è€ƒ... ")]))):(u(),r("div",Yt," ç‚¹å‡»å¼€å§‹è¯´è¯ "))],512),[[G,!O.value]]),y.value?(u(),r("div",Qt,' "'+c(y.value)+'" ',1)):C("",!0),s.value.length>0?(u(),r("div",Xt,[e("div",Zt,[le.value?(u(),r("div",{key:0,class:g(["fullscreen-message",le.value.sender])},c(le.value.content),3)):C("",!0)])])):C("",!0),e("div",{class:g(["fullscreen-input-area",{active:O.value}])},[k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.value=o),onKeyup:ye(L,["enter"]),placeholder:"è¾“å…¥æ¶ˆæ¯...",class:"fullscreen-message-input",disabled:f.value||d.value,ref:"fullscreenInput"},null,40,es),[[B,i.value]]),e("button",{class:"fullscreen-send-button",onClick:L,disabled:d.value||!i.value.trim()&&!y.value},c(d.value?"ç”Ÿæˆä¸­...":"å‘é€"),9,ts)],2),e("button",{class:"toggle-input-mode-btn",onClick:je},c(O.value?"ğŸ¤":"âŒ¨ï¸"),1),k(e("div",{class:"press-to-talk-area",onMousedown:K,onMouseup:P,onTouchstart:te(K,["prevent"]),onTouchend:te(P,["prevent"]),onMouseleave:t[1]||(t[1]=o=>f.value?P():null)},null,544),[[G,!O.value]]),e("button",{class:"exit-fullscreen-btn",onClick:me}," Ã— "),e("button",{class:"external-fullscreen-btn",onClick:t[2]||(t[2]=o=>H.value?Ee():Ve())},c(H.value?"ğŸ”™":"ğŸ“º"),1)],2)):C("",!0),k(e("div",ss,[e("div",as,[e("div",ls,[l.avatar?(u(),r("div",os,[e("img",{src:l.avatar,alt:"å¤´åƒ",class:"avatar",onClick:Z},null,8,ns),e("div",{class:g(["mood-indicator small",l.mood])},c(ue()),3)])):(u(),r("div",{key:1,class:"mood-avatar",onClick:Z},[e("div",{class:g(["mood-indicator large",l.mood])},c(ue()),3)]))]),e("div",is,[e("h2",null,c(l.name),1),e("p",rs,c(l.personality),1),e("div",us,[t[40]||(t[40]=e("span",null,"äº’åŠ¨åº¦:",-1)),e("div",vs,[e("div",{class:"level-progress",style:ne({width:`${l.intimacy}%`})},null,4)]),e("span",null,c(l.intimacy)+"%",1)]),e("div",cs,[e("button",{onClick:de,class:g(["voice-toggle",{active:S.value}])},c(S.value?"ğŸ”Š":"ğŸ”‡")+" è¯­éŸ³"+c(S.value?"å·²å¼€å¯":"å·²å…³é—­"),3),!$.value&&S.value?(u(),r("div",ds,[t[41]||(t[41]=e("span",{class:"tip-text"},"ç‚¹å‡»å¤´åƒæˆ–æ­¤å¤„æ¿€æ´»è¯­éŸ³",-1)),e("button",{class:"activate-btn",onClick:Z},"æ¿€æ´»è¯­éŸ³")])):C("",!0)]),e("div",{class:"quick-settings"},[e("button",{class:"quick-setting-btn",onClick:Le},t[42]||(t[42]=[e("span",null,"ğŸ‘¤ ä¸ªæ€§è®¾ç½®",-1)])),e("button",{class:"quick-setting-btn",onClick:Ke},t[43]||(t[43]=[e("span",null,"ğŸ”Š è¯­éŸ³è®¾ç½®",-1)]))]),I.value?(u(),r("div",ms,[t[44]||(t[44]=e("span",{class:"status-indicator connected"},"âœ“",-1)),t[45]||(t[45]=V(" å·²è¿æ¥AI ")),e("button",{onClick:he,class:"reset-key"},"é‡ç½®")])):(u(),r("div",ps,[k(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>U.value=o),placeholder:"è¯·è¾“å…¥DeepSeek API Key",class:"api-key-input"},null,512),[[B,U.value]]),e("button",{onClick:$e,class:"api-key-button"},"ä¿å­˜")]))])]),e("div",{class:"chat-container",ref_key:"chatContainer",ref:j},[_.value?(u(),r("div",ys,[e("div",gs,[e("p",null,"å·²åŠ è½½ä¸Šæ¬¡çš„èŠå¤©è®°å½• ("+c(He(N.value))+")",1),e("div",{class:"history-actions"},[e("button",{class:"history-action-btn",onClick:Oe}," ç»§ç»­èŠå¤© "),e("button",{class:"history-action-btn clear",onClick:Be}," å¼€å§‹æ–°å¯¹è¯ ")])])])):C("",!0),(u(!0),r(W,null,Y(s.value,(o,J)=>(u(),r("div",{key:J,class:g(["message",o.sender==="user"?"user-message":"assistant-message"])},[e("div",fs,[V(c(o.content)+" ",1),o.sender==="assistant"?(u(),r("button",{key:0,onClick:R=>ae(o.content),class:g(["speak-button",{speaking:T.value}]),title:"æ’­æ”¾è¯­éŸ³"},c(T.value?"ğŸ”Š":"ğŸ”ˆ"),11,bs)):C("",!0)]),e("div",ks,c(Ce(o.timestamp)),1)],2))),128)),d.value?(u(),r("div",Ss,t[46]||(t[46]=[e("div",{class:"typing-indicator"},[e("span"),e("span"),e("span")],-1)]))):C("",!0)],512),e("div",$s,[e("div",hs,[e("button",{class:"action-button",onClick:t[4]||(t[4]=o=>m("happy"))},t[47]||(t[47]=[e("span",null,"ğŸ˜Š",-1)])),e("button",{class:"action-button",onClick:t[5]||(t[5]=o=>m("sad"))},t[48]||(t[48]=[e("span",null,"ğŸ˜”",-1)])),e("button",{class:"action-button",onClick:t[6]||(t[6]=o=>m("surprised"))},t[49]||(t[49]=[e("span",null,"ğŸ˜®",-1)])),e("div",Cs,[t[50]||(t[50]=e("button",{class:"action-button more-toggle"},[e("span",null,"â‹¯")],-1)),e("div",_s,[e("button",{class:"emotion-item",onClick:t[7]||(t[7]=o=>m("loving"))},"ğŸ˜"),e("button",{class:"emotion-item",onClick:t[8]||(t[8]=o=>m("thinking"))},"ğŸ¤”"),e("button",{class:"emotion-item",onClick:t[9]||(t[9]=o=>m("shy"))},"ğŸ˜³"),e("button",{class:"emotion-item",onClick:t[10]||(t[10]=o=>m("cool"))},"ğŸ˜"),e("button",{class:"emotion-item",onClick:t[11]||(t[11]=o=>m("playful"))},"ğŸ˜œ"),e("button",{class:"emotion-item",onClick:t[12]||(t[12]=o=>m("sleepy"))},"ğŸ˜´"),e("button",{class:"emotion-item",onClick:t[13]||(t[13]=o=>m("confused"))},"ğŸ˜•"),e("button",{class:"emotion-item",onClick:t[14]||(t[14]=o=>m("amazed"))},"ğŸ¤©"),e("button",{class:"emotion-item",onClick:t[15]||(t[15]=o=>m("worried"))},"ğŸ˜Ÿ")])])]),k(e("input",{"onUpdate:modelValue":t[16]||(t[16]=o=>i.value=o),onKeyup:ye(L,["enter"]),placeholder:"å‘é€æ¶ˆæ¯...",class:"message-input",disabled:f.value},null,40,ws),[[B,i.value]]),e("button",{class:g(["voice-input-button",{recording:f.value}]),onMousedown:K,onMouseup:P,onMouseleave:t[17]||(t[17]=o=>f.value?P():null),onTouchstart:te(K,["prevent"]),onTouchend:te(P,["prevent"]),disabled:!A.value||d.value,title:A.value?"æŒ‰ä½è¯´è¯":"æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«"},t[51]||(t[51]=[e("span",{class:"voice-icon"},"ğŸ¤",-1)]),42,Is),e("button",{class:"send-button",onClick:L,disabled:d.value||!i.value.trim()&&!y.value},c(d.value?"ç”Ÿæˆä¸­...":"å‘é€"),9,As)]),y.value?(u(),r("div",xs,[e("div",Fs,"æ­£åœ¨è¯†åˆ«: "+c(y.value),1)])):C("",!0),e("div",Ts,[e("button",{class:"action-btn",onClick:Ue},t[52]||(t[52]=[e("span",null,"ğŸ’¾",-1),V(" å¯¼å‡ºèŠå¤©è®°å½• ")])),e("button",{class:"action-btn clear",onClick:qe},t[53]||(t[53]=[e("span",null,"ğŸ”„",-1),V(" é‡æ–°å¼€å§‹èŠå¤© ")])),e("button",{class:"action-btn fullscreen",onClick:me},[e("span",null,c(w.value?"ğŸ”™":"ğŸ“º"),1),V(" "+c(w.value?"é€€å‡ºå…¨å±":"å…¨å±æ¨¡å¼"),1)])])],512),[[G,!w.value]]),h.value?(u(),r("div",Ms,[e("div",{class:"voice-error-overlay",onClick:t[18]||(t[18]=o=>h.value=null)}),e("div",Vs,[e("div",Es,[t[54]||(t[54]=e("h3",null,"è¯­éŸ³è¯†åˆ«å‡ºé”™",-1)),e("button",{class:"voice-error-close",onClick:t[19]||(t[19]=o=>h.value=null)},"Ã—")]),e("div",js,[e("p",null,c(h.value),1),t[55]||(t[55]=e("p",{class:"voice-error-help"},[V(" å¯èƒ½çš„åŸå› : "),e("ul",null,[e("li",null,"æµè§ˆå™¨ä¸æ”¯æŒè¯­éŸ³è¯†åˆ«åŠŸèƒ½"),e("li",null,"æœªæˆäºˆéº¦å…‹é£æƒé™"),e("li",null,"æµè§ˆå™¨å®‰å…¨ç­–ç•¥é™åˆ¶"),e("li",null,"ç½‘ç»œè¿æ¥é—®é¢˜")])],-1)),t[56]||(t[56]=e("p",{class:"voice-error-tip"},"æ¨èä½¿ç”¨ Chrome æˆ– Edge æœ€æ–°ç‰ˆæœ¬æµè§ˆå™¨ï¼Œå¹¶ç¡®ä¿ç½‘é¡µé€šè¿‡HTTPSåŠ è½½",-1))]),e("div",zs,[e("button",{class:"voice-error-btn",onClick:t[20]||(t[20]=o=>h.value=null)},"æˆ‘çŸ¥é“äº†")])])])):C("",!0),M.value?(u(),r("div",Ds,[e("div",{class:"modal-overlay",onClick:t[21]||(t[21]=o=>M.value=!1)}),e("div",Rs,[e("button",{class:"modal-close",onClick:t[22]||(t[22]=o=>M.value=!1)},"Ã—"),e("div",Us,[e("div",qs,[e("button",{class:g(["tab-button",{active:E.value===0}]),onClick:t[23]||(t[23]=o=>re(0))}," ä¸ªæ€§è®¾ç½® ",2),e("button",{class:g(["tab-button",{active:E.value===1}]),onClick:t[24]||(t[24]=o=>re(1))}," è¯­éŸ³è®¾ç½® ",2)]),e("div",Ns,[k(e("div",Ps,[We(Ht,{initialSettings:a.getAssistantSettings(),onSave:De,onCancel:t[25]||(t[25]=o=>M.value=!1)},null,8,["initialSettings"])],512),[[G,E.value===0]]),k(e("div",Os,[e("div",Bs,[t[61]||(t[61]=e("h2",null,"è¯­éŸ³è®¾ç½®",-1)),e("div",Hs,[t[58]||(t[58]=e("label",null,"è‡ªåŠ¨æ’­æ”¾è¯­éŸ³",-1)),e("div",Ls,[k(e("input",{type:"checkbox",id:"auto-speak","onUpdate:modelValue":t[26]||(t[26]=o=>S.value=o),onChange:de},null,544),[[Ye,S.value]]),t[57]||(t[57]=e("label",{for:"auto-speak"},null,-1))])]),e("div",Ks,[e("label",null,"éŸ³é‡ ("+c(Math.round(F.value*100))+"%)",1),k(e("input",{type:"range",min:"0",max:"1",step:"0.1","onUpdate:modelValue":t[27]||(t[27]=o=>F.value=o),onChange:t[28]||(t[28]=o=>Ae(F.value)),class:"volume-slider"},null,544),[[B,F.value]])]),e("div",Js,[t[60]||(t[60]=e("label",null,"å‘è¨€äººé€‰æ‹©",-1)),k(e("select",{"onUpdate:modelValue":t[29]||(t[29]=o=>q.value=o),onChange:t[30]||(t[30]=(...o)=>a.changeVoice&&a.changeVoice(...o)),class:"voice-select"},t[59]||(t[59]=[Qe('<optgroup label="ä¸­æ–‡å¥³å£°" data-v-90cb3616><option value="youxiaoqin" data-v-90cb3616>æœ‰å°æ² - ç”œç¾å¥³å£°</option><option value="youxiaoxun" data-v-90cb3616>æœ‰å°è–° - æ¸©æŸ”å¥³å£°</option><option value="youxiaofu" data-v-90cb3616>æœ‰å°èŠ™ - æ´»æ³¼å¥³å£°</option><option value="youyuting" data-v-90cb3616>æœ‰é›¨å©· - æˆç†Ÿå¥³å£°</option><option value="youxiaobei" data-v-90cb3616>æœ‰å°è´ - å¯çˆ±å¥³å£°</option></optgroup><optgroup label="ä¸­æ–‡ç”·å£°" data-v-90cb3616><option value="youxiaozhi" data-v-90cb3616>æœ‰å°æ™º - é˜³å…‰ç”·å£°</option><option value="youxiaohao" data-v-90cb3616>æœ‰å°æµ© - æˆç†Ÿç”·å£°</option><option value="youxiaonan" data-v-90cb3616>æœ‰å°æ¥  - æ¸©å’Œç”·å£°</option><option value="youxiaoke" data-v-90cb3616>æœ‰å°è¯¾ - æ•™å­¦ç”·å£°</option></optgroup><optgroup label="è‹±æ–‡å¥³å£°" data-v-90cb3616><option value="youxiaomei" data-v-90cb3616>æœ‰å°ç¾ - ç¾å¼è‹±è¯­</option><option value="youxiaoying" data-v-90cb3616>æœ‰å°è‹± - è‹±å¼è‹±è¯­</option><option value="youyating" data-v-90cb3616>æœ‰é›…å©· - ç¾å¼è‹±è¯­</option><option value="Saila" data-v-90cb3616>Saila - è‹±å¼è‹±è¯­</option><option value="Auriana" data-v-90cb3616>Auriana - è‹±å¼è‹±è¯­</option></optgroup><optgroup label="è‹±æ–‡ç”·å£°" data-v-90cb3616><option value="youxiaoguan" data-v-90cb3616>æœ‰å°å®˜ - è‹±å¼è‹±è¯­</option></optgroup><optgroup label="å…¶ä»–è¯­è¨€" data-v-90cb3616><option value="youkejiang" data-v-90cb3616>æœ‰å¯é…± - æ—¥è¯­å¥³å£°</option><option value="yuantianjun" data-v-90cb3616>åŸç”°å› - æ—¥è¯­ç”·å£°</option><option value="piaozhiyou" data-v-90cb3616>æœ´æ™ºå¹¼ - éŸ©è¯­å¥³å£°</option><option value="piaotaiyan" data-v-90cb3616>æœ´æ³°è¨€ - éŸ©è¯­ç”·å£°</option></optgroup>',5)]),544),[[Xe,q.value]])]),e("div",Gs,[e("button",{class:"test-voice-btn",onClick:t[31]||(t[31]=o=>ae("å—¨ï¼æˆ‘æ˜¯ä½ çš„AIåŠ©æ‰‹ï¼Œè¿™æ˜¯ä¸€æ¡æµ‹è¯•è¯­éŸ³~"))}," æµ‹è¯•è¯­éŸ³ ")])])],512),[[G,E.value===1]])])])])])):C("",!0),z.value?(u(),r("div",Ws,[e("div",{class:"modal-overlay",onClick:t[32]||(t[32]=o=>z.value=!1)}),e("div",Ys,[t[62]||(t[62]=e("h3",null,"ç¡®è®¤é‡æ–°å¼€å§‹èŠå¤©ï¼Ÿ",-1)),t[63]||(t[63]=e("p",null,"å½“å‰çš„æ‰€æœ‰èŠå¤©è®°å½•å°†è¢«æ¸…ç©ºï¼Œä¸”æ— æ³•æ¢å¤ã€‚",-1)),e("div",Qs,[e("button",{class:"cancel-btn",onClick:t[33]||(t[33]=o=>z.value=!1)},"å–æ¶ˆ"),e("button",{class:"confirm-btn",onClick:Re},"ç¡®è®¤æ¸…ç©º")])])])):C("",!0)],2))}},sa=fe(Xs,[["__scopeId","data-v-90cb3616"]]);export{sa as default};
