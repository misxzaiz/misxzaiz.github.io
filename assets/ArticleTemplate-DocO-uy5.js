import{_,r as f,o as T,s as S,c as n,f as a,a as e,t as u,F as b,d as A,n as C,h as m,A as M,G as $,j as N}from"./index-BfRxaVdO.js";const q={class:"diagram-container"},z={class:"diagram-wrapper"},H=["viewBox"],I=.5,Z=2,L=.1,O={__name:"MqDiagramNew",props:{type:{type:String,required:!0}},setup(y){const F=y,w=f(null),i=f(400),g=f(300),s=f(1),E={basic:{width:470,height:300,elements:[{type:"rect",x:50,y:50,width:100,height:60,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:100,y:85,text:"生产者",fill:"#1976D2"},{type:"rect",x:200,y:50,width:100,height:60,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:250,y:85,text:"消息队列",fill:"#F57C00"},{type:"rect",x:350,y:50,width:100,height:60,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:400,y:85,text:"消费者",fill:"#C2185B"},{type:"path",d:"M150 80 L200 80",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M300 80 L350 80",stroke:"#666",markerEnd:"url(#arrowhead)"}]},benefits:{width:400,height:300,elements:[{type:"circle",cx:200,cy:150,r:40,fill:"#118AB2",stroke:"#0D6B8F"},{type:"text",x:200,y:155,text:"消息队列",fill:"white"},{type:"circle",cx:100,cy:100,r:30,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:100,y:105,text:"解耦",fill:"#1976D2"},{type:"circle",cx:300,cy:100,r:30,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:300,y:105,text:"异步",fill:"#1976D2"},{type:"circle",cx:100,cy:200,r:30,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:100,y:205,text:"削峰",fill:"#1976D2"},{type:"circle",cx:300,cy:200,r:30,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:300,y:205,text:"通知",fill:"#1976D2"},{type:"path",d:"M140 120 L160 130",stroke:"#666"},{type:"path",d:"M260 120 L240 130",stroke:"#666"},{type:"path",d:"M140 180 L160 170",stroke:"#666"},{type:"path",d:"M260 180 L240 170",stroke:"#666"}]},scenarios:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:120,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:110,y:75,text:"电商系统",fill:"#1976D2"},{type:"rect",x:230,y:50,width:120,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:290,y:75,text:"社交平台",fill:"#F57C00"},{type:"rect",x:50,y:130,width:120,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:110,y:155,text:"金融系统",fill:"#C2185B"},{type:"rect",x:230,y:130,width:120,height:40,fill:"#E8F5E9",stroke:"#388E3C"},{type:"text",x:290,y:155,text:"物联网",fill:"#388E3C"},{type:"rect",x:140,y:210,width:120,height:40,fill:"#F3E5F5",stroke:"#7B1FA2"},{type:"text",x:200,y:235,text:"大数据",fill:"#7B1FA2"}]},workflow:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:300,height:60,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:200,y:85,text:"消息发送流程",fill:"#1976D2"},{type:"rect",x:50,y:120,width:300,height:60,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:155,text:"消息存储流程",fill:"#F57C00"},{type:"rect",x:50,y:190,width:300,height:60,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:200,y:225,text:"消息消费流程",fill:"#C2185B"},{type:"path",d:"M200 110 L200 120",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M200 180 L200 190",stroke:"#666",markerEnd:"url(#arrowhead)"}]},patterns:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:140,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:120,y:75,text:"点对点模式",fill:"#1976D2"},{type:"rect",x:210,y:50,width:140,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:280,y:75,text:"发布订阅模式",fill:"#F57C00"},{type:"rect",x:50,y:130,width:140,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:120,y:155,text:"请求响应模式",fill:"#C2185B"},{type:"rect",x:210,y:130,width:140,height:40,fill:"#E8F5E9",stroke:"#388E3C"},{type:"text",x:280,y:155,text:"广播模式",fill:"#388E3C"}]},reliability:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:300,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:200,y:75,text:"消息持久化",fill:"#1976D2"},{type:"rect",x:50,y:100,width:300,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:125,text:"消息确认机制",fill:"#F57C00"},{type:"rect",x:50,y:150,width:300,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:200,y:175,text:"消息顺序保证",fill:"#C2185B"},{type:"rect",x:50,y:200,width:300,height:40,fill:"#E8F5E9",stroke:"#388E3C"},{type:"text",x:200,y:225,text:"消息幂等性",fill:"#388E3C"}]},async:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:120,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:110,y:75,text:"用户系统",fill:"#1976D2"},{type:"rect",x:140,y:150,width:120,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:175,text:"消息队列",fill:"#F57C00"},{type:"rect",x:230,y:50,width:120,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:290,y:75,text:"邮件系统",fill:"#C2185B"},{type:"path",d:"M110 90 L140 170",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M200 190 L290 90",stroke:"#666",markerEnd:"url(#arrowhead)"}]},peak:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:120,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:110,y:75,text:"用户请求",fill:"#1976D2"},{type:"rect",x:140,y:150,width:120,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:175,text:"消息队列",fill:"#F57C00"},{type:"rect",x:230,y:50,width:120,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:290,y:75,text:"处理系统",fill:"#C2185B"},{type:"path",d:"M110 90 L140 170",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M200 190 L290 90",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M50 30 Q100 10 150 30",stroke:"#666",fill:"none",strokeDasharray:"5,5"},{type:"path",d:"M150 30 Q200 50 250 30",stroke:"#666",fill:"none",strokeDasharray:"5,5"}]},decouple:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:120,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:110,y:75,text:"订单系统",fill:"#1976D2"},{type:"rect",x:140,y:150,width:120,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:175,text:"消息队列",fill:"#F57C00"},{type:"rect",x:230,y:50,width:120,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:290,y:75,text:"库存系统",fill:"#C2185B"},{type:"path",d:"M110 90 L140 170",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M200 190 L290 90",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M50 30 L350 30",stroke:"#666",fill:"none",strokeDasharray:"5,5"}]},order:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:120,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:110,y:75,text:"订单创建",fill:"#1976D2"},{type:"rect",x:140,y:150,width:120,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:175,text:"消息队列",fill:"#F57C00"},{type:"rect",x:230,y:50,width:120,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:290,y:75,text:"库存更新",fill:"#C2185B"},{type:"path",d:"M110 90 L140 170",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M200 190 L290 90",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M50 30 L350 30",stroke:"#666",fill:"none",strokeDasharray:"5,5"}]},log:{width:400,height:300,elements:[{type:"rect",x:50,y:50,width:120,height:40,fill:"#E3F2FD",stroke:"#1976D2"},{type:"text",x:110,y:75,text:"日志收集",fill:"#1976D2"},{type:"rect",x:140,y:150,width:120,height:40,fill:"#FFF3E0",stroke:"#F57C00"},{type:"text",x:200,y:175,text:"消息队列",fill:"#F57C00"},{type:"rect",x:230,y:50,width:120,height:40,fill:"#FCE4EC",stroke:"#C2185B"},{type:"text",x:290,y:75,text:"日志分析",fill:"#C2185B"},{type:"path",d:"M110 90 L140 170",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M200 190 L290 90",stroke:"#666",markerEnd:"url(#arrowhead)"},{type:"path",d:"M50 30 L350 30",stroke:"#666",fill:"none",strokeDasharray:"5,5"}]}},c=()=>{const p=E[F.type];if(!p)return;i.value=p.width,g.value=p.height;const d=w.value;if(!d)return;for(;d.firstChild;)d.removeChild(d.firstChild);const B=document.createElementNS("http://www.w3.org/2000/svg","defs"),x=document.createElementNS("http://www.w3.org/2000/svg","marker");x.setAttribute("id","arrowhead"),x.setAttribute("markerWidth","10"),x.setAttribute("markerHeight","7"),x.setAttribute("refX","9"),x.setAttribute("refY","3.5"),x.setAttribute("orient","auto");const D=document.createElementNS("http://www.w3.org/2000/svg","polygon");D.setAttribute("points","0 0, 10 3.5, 0 7"),D.setAttribute("fill","#666"),x.appendChild(D),B.appendChild(x),d.appendChild(B);const v=document.createElementNS("http://www.w3.org/2000/svg","g");v.setAttribute("transform",`scale(${s.value})`),v.setAttribute("class","zoomable-content"),d.appendChild(v),p.elements.forEach(r=>{let t;switch(r.type){case"rect":t=document.createElementNS("http://www.w3.org/2000/svg","rect"),t.setAttribute("x",r.x),t.setAttribute("y",r.y),t.setAttribute("width",r.width),t.setAttribute("height",r.height),t.setAttribute("fill",r.fill),t.setAttribute("stroke",r.stroke);break;case"circle":t=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.setAttribute("cx",r.cx),t.setAttribute("cy",r.cy),t.setAttribute("r",r.r),t.setAttribute("fill",r.fill),t.setAttribute("stroke",r.stroke);break;case"text":t=document.createElementNS("http://www.w3.org/2000/svg","text"),t.setAttribute("x",r.x),t.setAttribute("y",r.y),t.setAttribute("text-anchor","middle"),t.setAttribute("fill",r.fill),t.textContent=r.text;break;case"path":t=document.createElementNS("http://www.w3.org/2000/svg","path"),t.setAttribute("d",r.d),t.setAttribute("stroke",r.stroke),r.markerEnd&&t.setAttribute("marker-end",r.markerEnd);break}t&&v.appendChild(t)})},l=()=>{s.value=Math.min(Z,s.value+L),k()},o=()=>{s.value=Math.max(I,s.value-L),k()},h=()=>{s.value=1,k()},k=()=>{const p=w.value;if(p){const d=p.querySelector(".zoomable-content");d&&d.setAttribute("transform",`scale(${s.value})`)}};return T(()=>{c()}),S(()=>F.type,()=>{c()}),(p,d)=>(a(),n("div",q,[e("div",z,[(a(),n("svg",{ref_key:"svgRef",ref:w,class:"mq-diagram",viewBox:`0 0 ${i.value} ${g.value}`},null,8,H))]),e("div",{class:"zoom-controls"},[e("button",{onClick:o},"-"),e("button",{onClick:h},"100%"),e("button",{onClick:l},"+")])]))}},st=_(O,[["__scopeId","data-v-4a50f8f9"]]),j={class:"article-container"},P={class:"article-header"},Q={class:"subtitle"},R={class:"content-section"},V={class:"section-navigation"},W=["onClick"],G={class:"section-content"},X={class:"content-wrapper"},Y=["innerHTML"],J={key:0,class:"diagram-content"},K={key:0,class:"diagram-list"},U=["onClick"],tt={class:"navigation-buttons"},et={class:"chapter-nav"},rt={key:0,class:"diagram-overlay-list"},it=["onClick"],lt={__name:"ArticleTemplate",props:{title:{type:String,required:!0},subtitle:{type:String,default:""},sections:{type:Array,required:!0},diagramComponent:{type:Object,required:!0},showPrevButton:{type:Boolean,default:!1},showNextButton:{type:Boolean,default:!0},prevChapterTitle:{type:String,default:""},nextChapterTitle:{type:String,default:""}},emits:["navigate"],setup(y,{emit:F}){const i=f(y.sections[0]),g=f(!1),s=f(0),E=c=>c.replace(/^# (.*$)/gm,"<h1>$1</h1>").replace(/^## (.*$)/gm,"<h2>$1</h2>").replace(/^### (.*$)/gm,"<h3>$1</h3>").replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n- (.*$)/gm,"<li>$1</li>").replace(/(<li>.*<\/li>)/g,"<ul>$1</ul>").replace(/\n\n/g,"<br>");return(c,l)=>(a(),n("div",j,[e("header",P,[e("h1",null,u(y.title),1),e("p",Q,u(y.subtitle),1)]),e("div",R,[e("div",V,[(a(!0),n(b,null,A(y.sections,o=>(a(),n("div",{key:o.id,class:C(["nav-item",{active:i.value.id===o.id}]),onClick:h=>i.value=o},u(o.title),11,W))),128))]),e("div",G,[e("h2",null,u(i.value.title),1),e("div",X,[e("div",{class:"text-content markdown-content",innerHTML:E(i.value.content)},null,8,Y),i.value.diagramType?(a(),n("div",J,[Array.isArray(i.value.diagramType)?(a(),n("div",K,[(a(!0),n(b,null,A(i.value.diagramType,(o,h)=>(a(),n("div",{key:h,class:C(["diagram-item",{active:s.value===h}]),onClick:k=>s.value=h}," 图表 "+u(h+1),11,U))),128))])):m("",!0),e("div",{class:"diagram-wrapper",onClick:l[0]||(l[0]=o=>g.value=!0)},[(a(),M($(y.diagramComponent),{type:Array.isArray(i.value.diagramType)?i.value.diagramType[s.value]:i.value.diagramType},null,8,["type"]))])])):m("",!0)])])]),e("div",tt,[e("button",{class:"nav-btn home",onClick:l[1]||(l[1]=o=>c.$emit("navigate","home"))}," 返回首页 "),e("div",et,[y.showPrevButton?(a(),n("button",{key:0,class:"nav-btn prev",onClick:l[2]||(l[2]=o=>c.$emit("navigate","prev"))}," ← 上一章："+u(y.prevChapterTitle),1)):m("",!0),y.showNextButton?(a(),n("button",{key:1,class:"nav-btn next",onClick:l[3]||(l[3]=o=>c.$emit("navigate","next"))}," 下一章："+u(y.nextChapterTitle)+" → ",1)):m("",!0)])]),e("div",{class:C(["diagram-overlay",{active:g.value}]),onClick:l[6]||(l[6]=o=>g.value=!1)},[e("div",{class:"diagram-overlay-content",onClick:l[5]||(l[5]=N(()=>{},["stop"]))},[e("div",{class:"diagram-overlay-close",onClick:l[4]||(l[4]=o=>g.value=!1)},"×"),Array.isArray(i.value.diagramType)?(a(),n("div",rt,[(a(!0),n(b,null,A(i.value.diagramType,(o,h)=>(a(),n("div",{key:h,class:C(["diagram-overlay-item",{active:s.value===h}]),onClick:k=>s.value=h}," 图表 "+u(h+1),11,it))),128))])):m("",!0),(a(),M($(y.diagramComponent),{type:Array.isArray(i.value.diagramType)?i.value.diagramType[s.value]:i.value.diagramType},null,8,["type"]))])],2)]))}},ot=_(lt,[["__scopeId","data-v-f9370576"]]);export{ot as A,st as M};
