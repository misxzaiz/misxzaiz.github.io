import{_ as N,a as l,j as K,b as c,d as e,f as d,v as f,e as b,n as y,t as P,g as T,i as V,y as z,o as S}from"./index-DF37baOT.js";import{T as I}from"./TTSService-DyMlLgvk.js";const $={class:"settings-container"},j={class:"header"},E={class:"settings-panel"},R={class:"section"},W={class:"setting-item"},q={class:"setting-item"},F={class:"section"},G={class:"setting-item"},H={class:"voice-mode-selector"},J={key:0,class:"api-settings"},L={class:"setting-item"},O={class:"setting-item"},Q={class:"setting-item"},X={key:1,class:"browser-voice-info"},Y={class:"section"},Z={class:"setting-item"},h={class:"setting-item"},ee={class:"section"},se={class:"setting-item"},te={__name:"SettingsView",setup(le){const D=l("light"),n=l(""),i=l(""),a=l(""),v=l(!1),u=l(null),p=l(!1),r=l(""),o=l(""),g=l(!1),m=l(""),k=l(""),w=l(!1);K(()=>{n.value=localStorage.getItem("tts_app_key")||"",i.value=localStorage.getItem("tts_app_secret")||"",p.value=!!(n.value&&i.value),u.value=new I,r.value=localStorage.getItem("deepseek_apikey")||"",m.value=localStorage.getItem("assistant_name")||"小爱"});const _=()=>{if(r.value.trim()===""){o.value="请输入有效的API密钥",g.value=!1,setTimeout(()=>{o.value=""},3e3);return}localStorage.setItem("deepseek_apikey",r.value.trim()),o.value="DeepSeek API密钥已保存",g.value=!0,setTimeout(()=>{o.value=""},3e3)},C=()=>{r.value="",localStorage.removeItem("deepseek_apikey"),o.value="DeepSeek API密钥已清除",g.value=!0,setTimeout(()=>{o.value=""},3e3)},M=()=>{if(u.value||(u.value=new I),n.value.trim()===""||i.value.trim()===""){a.value="请输入有效的API ID和密钥",v.value=!1,setTimeout(()=>{a.value=""},3e3);return}u.value.updateApiKeys(n.value.trim(),i.value.trim())?(a.value="TTS API设置已保存",v.value=!0):(a.value="保存失败，请检查输入",v.value=!1),setTimeout(()=>{a.value=""},3e3)},U=()=>{u.value||(u.value=new I),n.value="",i.value="",p.value=!1,u.value.updateApiKeys("","")?(a.value="API密钥已清除，将使用浏览器语音",v.value=!0):(a.value="清除失败",v.value=!1),setTimeout(()=>{a.value=""},3e3)},x=()=>{if(u.value||(u.value=new I),!u.value.isBrowserSpeechSupported()){a.value="您的浏览器不支持语音合成",v.value=!1,setTimeout(()=>{a.value=""},3e3);return}u.value.synthesizeWithBrowser("这是浏览器语音合成的测试，您现在听到的是浏览器内置的语音。")},B=()=>{m.value.trim()===""&&(m.value="小爱"),localStorage.setItem("assistant_name",m.value.trim()),k.value="助手名称已保存",w.value=!0,setTimeout(()=>{k.value=""},3e3)};return(A,s)=>(S(),c("div",$,[e("div",j,[e("button",{class:"back-button",onClick:s[0]||(s[0]=t=>A.$router.push("/"))},"←"),s[8]||(s[8]=e("h1",null,"设置",-1))]),e("div",E,[e("div",R,[s[10]||(s[10]=e("h2",null,"DeepSeek API 密钥设置",-1)),e("div",W,[s[9]||(s[9]=e("label",null,"DeepSeek API 密钥",-1)),d(e("input",{type:"password","onUpdate:modelValue":s[1]||(s[1]=t=>r.value=t),placeholder:"输入DeepSeek API密钥",class:"input-field"},null,512),[[f,r.value]])]),e("div",q,[e("button",{onClick:_,class:"save-button"},"保存 DeepSeek 设置"),e("button",{onClick:C,class:"clear-button"},"清除 API 密钥"),o.value?(S(),c("p",{key:0,class:y(["save-message",{success:g.value}])},P(o.value),3)):b("",!0)]),s[11]||(s[11]=e("div",{class:"api-info"},[e("p",null,"DeepSeek API用于电子女友的对话生成，如果不设置将无法进行对话。"),e("p",null,[T("获取API密钥请访问: "),e("a",{href:"https://platform.deepseek.com/",target:"_blank"},"DeepSeek平台")])],-1))]),e("div",F,[s[18]||(s[18]=e("h2",null,"语音合成 API 设置",-1)),e("div",G,[e("div",H,[e("label",null,[d(e("input",{type:"radio","onUpdate:modelValue":s[2]||(s[2]=t=>p.value=t),value:!1},null,512),[[V,p.value]]),s[12]||(s[12]=T(" 使用浏览器内置语音合成（无需API密钥） "))]),e("label",null,[d(e("input",{type:"radio","onUpdate:modelValue":s[3]||(s[3]=t=>p.value=t),value:!0},null,512),[[V,p.value]]),s[13]||(s[13]=T(" 使用有道智云语音合成（需要API密钥） "))])])]),p.value?(S(),c("div",J,[e("div",L,[s[14]||(s[14]=e("label",null,"有道智云 API ID",-1)),d(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>n.value=t),placeholder:"输入有道智云 API ID",class:"input-field"},null,512),[[f,n.value]])]),e("div",O,[s[15]||(s[15]=e("label",null,"有道智云 API 密钥",-1)),d(e("input",{type:"password","onUpdate:modelValue":s[5]||(s[5]=t=>i.value=t),placeholder:"输入有道智云 API 密钥",class:"input-field"},null,512),[[f,i.value]])]),e("div",Q,[e("button",{onClick:M,class:"save-button"},"保存 TTS 设置"),e("button",{onClick:U,class:"clear-button"},"清除 API 密钥"),a.value?(S(),c("p",{key:0,class:y(["save-message",{success:v.value}])},P(a.value),3)):b("",!0)])])):(S(),c("div",X,[s[16]||(s[16]=e("p",null,"使用浏览器内置语音合成功能，无需API密钥。",-1)),s[17]||(s[17]=e("p",null,"注意：浏览器语音质量可能不如云端API，且不同浏览器效果不同。",-1)),e("button",{onClick:x,class:"test-button"},"测试浏览器语音")]))]),e("div",Y,[s[20]||(s[20]=e("h2",null,"个性设置",-1)),e("div",Z,[s[19]||(s[19]=e("label",null,"助手名称",-1)),d(e("input",{type:"text","onUpdate:modelValue":s[6]||(s[6]=t=>m.value=t),placeholder:"输入助手名称",class:"input-field"},null,512),[[f,m.value]])]),e("div",h,[e("button",{onClick:B,class:"save-button"},"保存名称"),k.value?(S(),c("p",{key:0,class:y(["save-message",{success:w.value}])},P(k.value),3)):b("",!0)])]),e("div",ee,[s[23]||(s[23]=e("h2",null,"其他设置",-1)),e("div",se,[s[22]||(s[22]=e("label",null,"界面主题",-1)),d(e("select",{"onUpdate:modelValue":s[7]||(s[7]=t=>D.value=t)},s[21]||(s[21]=[e("option",{value:"light"},"浅色",-1),e("option",{value:"dark"},"深色",-1),e("option",{value:"auto"},"跟随系统",-1)]),512),[[z,D.value]])])]),s[24]||(s[24]=e("div",{class:"section"},[e("h2",null,"关于"),e("div",{class:"about-info"},[e("p",null,"小爱助手 v1.0.0"),e("p",null,"支持文字对话和语音合成功能"),e("p",null,"基于DeepSeek AI和网易有道语音合成")])],-1))])]))}},oe=N(te,[["__scopeId","data-v-3ab74e7d"]]);export{oe as default};
