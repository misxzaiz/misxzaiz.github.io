import{f as request,_ as _export_sfc,o as openBlock,c as createElementBlock,a as createBaseVNode,b as createVNode,w as withCtx,h as createCommentVNode,d as resolveComponent,g as createTextVNode,t as toDisplayString,e as createBlock}from"./index-c4c4a136.js";const MAIN_URI="https://dominant-ant-formerly.ngrok-free.app",getTopServerListApi=()=>request({url:`${MAIN_URI}/server/getTopServerList`,method:"GET"}),getServerListApi=e=>request({url:`${MAIN_URI}/server/getServerList/${e}`,method:"GET"}),getServerBalanceApi=e=>request({url:`${MAIN_URI}/server/getServerBalance/${e}`,method:"GET"}),setServerDetailApi=e=>request({url:`${MAIN_URI}/server/setServerDetail`,method:"POST",data:e}),dealMethodApi=e=>request({url:`${MAIN_URI}/server/dealMethod`,method:"POST",data:e}),_sfc_main={data:()=>({list:{serverTopList:[],serverList:[]},po:{serverDetail:{serverName:null,name:null,desc:null},serverPo:{name:null,ip:null,port:null,weight:null,area:null,classItemList:[]},classItem:{className:null,classPath:null,classMark:null,methodList:[]},methodDetail:{methodName:null,methodArgsTypes:[]},methodArgsType:{name:null,args:[],argsJson:null},dealMethodPo:{id:null,token:null,serverName:null,className:null,version:null,methodName:null,data:null,result:null,jsonData:{}}},dialog:{editServer:!1}}),onLoad(){},mounted(){this.getTopServerList()},methods:{getTopServerList(){getTopServerListApi().then((e=>{this.list.serverTopList=e.data}))},getServerList(e){this.po.dealMethodPo.serverName=e.serverName,getServerListApi(e.serverName).then((t=>{0===t.data.length?e.status=!1:e.status=!0,this.list.serverList=t.data}))},getServerBalance(e){this.po.dealMethodPo.serverName=e.serverName,getServerBalanceApi(e.serverName).then((t=>{0===t.data.length?e.status=!1:e.status=!0,this.list.serverList=t.data}))},editDialog(e){this.dialog.editServer=!0,this.po.serverDetail=e},edit(){setServerDetailApi(this.po.serverDetail).then((e=>{this.$message.success("修改成功！")}))},showServerDetail(e){this.po.dealMethodPo.className=e.name,this.po.serverPo=e},showMethod(method,row){if(this.po.dealMethodPo.className=row.className,this.po.dealMethodPo.methodName=method.methodName,this.po.dealMethodPo.version=row.classMark,console.log("method"),console.log(method),0!==method.methodArgsTypes.length){let data="{";console.log("method.methodArgsTypes[0]"),console.log(method.methodArgsTypes[0]);let args=method.methodArgsTypes[0].args;null!==args?(args.forEach((e=>{data+='"'+e+'": "",'})),data+="}",this.po.dealMethodPo.data=data,console.log(eval("("+method.methodArgsTypes[0].argsJson+")")),this.po.dealMethodPo.data=method.methodArgsTypes[0].argsJson,this.po.dealMethodPo.jsonData=eval("("+method.methodArgsTypes[0].argsJson+")"),console.log(this.po.dealMethodPo.jsonData)):this.po.dealMethodPo.data=""}else this.po.dealMethodPo.data=""},dealMethod(){console.time("请求响应时间"),dealMethodApi(this.po.dealMethodPo).then((e=>{console.timeEnd("请求响应时间"),console.log("responseTime"),this.po.dealMethodPo.result=e.data}))},showMethodDetail(e){this.po.classItem=e}}};function _sfc_render(e,t,o,a,l,d){const r=resolveComponent("el-button"),s=resolveComponent("el-table-column"),i=resolveComponent("el-text"),c=resolveComponent("el-table"),n=resolveComponent("el-input"),p=resolveComponent("el-form-item"),h=resolveComponent("el-form"),m=resolveComponent("el-dialog"),N=resolveComponent("el-descriptions-item"),u=resolveComponent("el-tag"),V=resolveComponent("el-descriptions");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",{style:{display:"flex"}},[createBaseVNode("div",{style:{margin:"2%"}},[createVNode(c,{data:l.list.serverTopList,style:{width:"100%"}},{default:withCtx((()=>[createVNode(s,{prop:"serverName",label:"项目名",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{style:{display:"flex","align-items":"center"}},[createVNode(r,{type:"text",plain:"",onClick:t=>d.getServerList(e.row)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.serverName),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"status",label:"状态",width:"120"},{default:withCtx((e=>[e.row.status?(openBlock(),createBlock(i,{key:0,type:"success"},{default:withCtx((()=>[createTextVNode(" 正常 ")])),_:1})):(openBlock(),createBlock(i,{key:1,type:"warning"},{default:withCtx((()=>[createTextVNode(" 停机 ")])),_:1}))])),_:1}),createVNode(s,{prop:"serverName",label:"负载均衡",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{style:{display:"flex","align-items":"center"}},[createVNode(r,{type:"text",plain:"",onClick:t=>d.getServerBalance(e.row)},{default:withCtx((()=>[createTextVNode("随机")])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"name",label:"名字",width:"120"}),createVNode(s,{prop:"desc",label:"描述",width:"120"}),createVNode(s,{prop:"edit",label:"编辑",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{style:{display:"flex","align-items":"center"}},[createVNode(r,{type:"text",plain:"",onClick:t=>d.editDialog(e.row)},{default:withCtx((()=>[createTextVNode("编辑")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])]),createBaseVNode("div",null,[createVNode(m,{modelValue:l.dialog.editServer,"onUpdate:modelValue":t[3]||(t[3]=e=>l.dialog.editServer=e),title:l.po.serverDetail.serverName},{footer:withCtx((()=>[createBaseVNode("span",{class:"dialog-footer"},[createVNode(r,{onClick:t[2]||(t[2]=e=>l.dialog.editServer=!1)},{default:withCtx((()=>[createTextVNode("Cancel")])),_:1}),createVNode(r,{type:"primary",onClick:d.edit},{default:withCtx((()=>[createTextVNode(" Confirm ")])),_:1},8,["onClick"])])])),default:withCtx((()=>[createVNode(h,{model:l.po.serverDetail},{default:withCtx((()=>[createVNode(p,{label:"昵称"},{default:withCtx((()=>[createVNode(n,{modelValue:l.po.serverDetail.name,"onUpdate:modelValue":t[0]||(t[0]=e=>l.po.serverDetail.name=e)},null,8,["modelValue"])])),_:1}),createVNode(p,{label:"描述"},{default:withCtx((()=>[createVNode(n,{modelValue:l.po.serverDetail.desc,"onUpdate:modelValue":t[1]||(t[1]=e=>l.po.serverDetail.desc=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])]),createBaseVNode("div",{style:{margin:"2%"}},[createVNode(c,{data:l.list.serverList,style:{width:"100%"}},{default:withCtx((()=>[createVNode(s,{prop:"name",label:"名字",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{style:{display:"flex","align-items":"center"}},[createVNode(r,{type:"text",plain:"",onClick:t=>d.showServerDetail(e.row)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.name),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"ip",label:"IP",width:"120"}),createVNode(s,{prop:"port",label:"端口号",width:"120"}),createVNode(s,{prop:"weight",label:"权重",width:"120"}),createVNode(s,{prop:"area",label:"区域",width:"120"})])),_:1},8,["data"])])]),createBaseVNode("div",{style:{display:"flex"}},[createBaseVNode("div",{style:{margin:"2%"}},[createVNode(c,{data:l.po.serverPo.classItemList,style:{width:"100%"}},{default:withCtx((()=>[createVNode(s,{prop:"className",label:"服务名",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{style:{display:"flex","align-items":"center"}},[createVNode(r,{type:"text",plain:"",onClick:t=>d.showMethodDetail(e.row)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.className),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"className",label:"类名",width:"120"}),createVNode(s,{prop:"classPath",label:"类路径",width:"120"}),createVNode(s,{prop:"classMark",label:"类标识",width:"120"})])),_:1},8,["data"])]),createBaseVNode("div",{style:{margin:"2%"}},[createVNode(c,{data:l.po.classItem.methodList,style:{width:"100%"}},{default:withCtx((()=>[createVNode(s,{prop:"methodName",label:"方法",width:"120"},{default:withCtx((e=>[createBaseVNode("div",{style:{display:"flex","align-items":"center"}},[createVNode(r,{type:"text",plain:"",onClick:t=>d.showMethod(e.row,l.po.classItem)},{default:withCtx((()=>[createTextVNode(toDisplayString(e.row.methodName),1)])),_:2},1032,["onClick"])])])),_:1}),createVNode(s,{prop:"deal",label:"属性",width:"120"},{default:withCtx((e=>[e.row.methodArgsTypes.length>0?(openBlock(),createElementBlock("div",{key:0,style:{display:"flex","align-items":"center"}},toDisplayString(e.row.methodArgsTypes[0].name),1)):createCommentVNode("v-if",!0)])),_:1})])),_:1},8,["data"])]),createBaseVNode("div",{style:{width:"100%",margin:"2%"}},[createVNode(V,{title:l.po.dealMethodPo.methodName},{default:withCtx((()=>[createVNode(N,{label:"ID"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.id),1)])),_:1}),createVNode(N,{label:"TOKEN"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.token),1)])),_:1}),createVNode(N,{label:"项目名"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.serverName),1)])),_:1}),createVNode(N,{label:"类名"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.className),1)])),_:1}),createVNode(N,{label:"方法名"},{default:withCtx((()=>[createVNode(u,{size:"small"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.methodName),1)])),_:1})])),_:1}),createVNode(N,{label:"版本"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.version),1)])),_:1}),null!=l.po.dealMethodPo.result?(openBlock(),createBlock(N,{key:0,label:"结果ID"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.result.id),1)])),_:1})):createCommentVNode("v-if",!0),null!=l.po.dealMethodPo.result?(openBlock(),createBlock(N,{key:1,label:"结果状态码"},{default:withCtx((()=>[200===l.po.dealMethodPo.result.code?(openBlock(),createBlock(u,{key:0,class:"ml-2",type:"success"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.result.code),1)])),_:1})):(openBlock(),createBlock(u,{key:1,class:"ml-2",type:"warning"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.result.code),1)])),_:1}))])),_:1})):createCommentVNode("v-if",!0),null!=l.po.dealMethodPo.result?(openBlock(),createBlock(N,{key:2,label:"结果消息"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.result.message),1)])),_:1})):createCommentVNode("v-if",!0),null!=l.po.dealMethodPo.result?(openBlock(),createBlock(N,{key:3,label:"结果数据"},{default:withCtx((()=>[createTextVNode(toDisplayString(l.po.dealMethodPo.result.data),1)])),_:1})):createCommentVNode("v-if",!0)])),_:1},8,["title"]),createVNode(h,{model:l.po.dealMethodPo},{default:withCtx((()=>[createVNode(p,{label:"数据"},{default:withCtx((()=>[createVNode(n,{type:"textarea",modelValue:l.po.dealMethodPo.data,"onUpdate:modelValue":t[4]||(t[4]=e=>l.po.dealMethodPo.data=e),placeholder:"data",clearable:"",rows:6},null,8,["modelValue"])])),_:1}),createVNode(p,null,{default:withCtx((()=>[createVNode(r,{type:"primary",onClick:d.dealMethod},{default:withCtx((()=>[createTextVNode("执行")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"]),createCommentVNode("        <div>"),createCommentVNode('          <el-form :model="po.dealMethodPo">'),createCommentVNode('            <el-form-item v-for="(value, key) in po.dealMethodPo.jsonData" :key="key" :label="key">'),createCommentVNode('              <el-input v-model="po.dealMethodPo.jsonData[key]" placeholder="data" clearable :rows="6" />'),createCommentVNode("            </el-form-item>"),createCommentVNode("            <el-form-item>"),createCommentVNode('              <el-button type="primary" @click="dealMethod">执行</el-button>'),createCommentVNode("            </el-form-item>"),createCommentVNode("          </el-form>"),createCommentVNode("        </div>")])])])}const card=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{card as default};
