import{_ as s,n as a,E as e,p as t,s as i,o as d,d as r,w as l,i as n,b as u,a as o,t as c,h as m,g,c as h,r as p,F as f,e as y}from"./index-6bb7f798.js";import"./main.222a7ece.js";import{j as v}from"./post.25a74dee.js";import{a as _,c as k}from"./userFriend.79bef6fa.js";import{a as F}from"./user.739f2d9e.js";const b=s({name:"user.vue",data:()=>({List:{},isFriend:!1,user:{}}),onLoad(s){this.user.uid=s.uid,this.getUser(this.user.uid),this.checkFriend(this.user.uid)},methods:{getDetails(s){a({url:"/h5/post/details?id="+s})},getUserList(s){v(s).then((s=>{200===s.data.code?this.List=s.data.data:e.error(s.data.message)}))},navigateToChat(s){t("chatWithTuid",s),i({url:"/h5/chat/index"})},addFriend(s){_(s).then((s=>{200===s.data.code?e.success(s.data.message):e.error(s.data.message)}))},getUser(s){F(s).then((s=>{200===s.data.code?(this.user=s.data.data,this.getUserList(this.user.id)):e.error(s.data.message)}))},checkFriend(s){k(s).then((s=>{200===s.data.code&&(this.isFriend=!0)}))}}},[["render",function(s,a,e,t,i,v){const _=y("el-avatar"),k=y("el-button"),F=y("el-card"),b=n,L=y("el-col"),j=y("el-row");return d(),r(b,null,{default:l((()=>[u(b,null,{default:l((()=>[u(F,{style:{padding:"0"}},{default:l((()=>[o("div",{class:"avatar",style:{margin:"3%"}},[u(_,{size:150,src:i.user.icon},null,8,["src"])]),o("div",{style:{padding:"14px"}},[o("span",null,c("用户名: "+i.user.username),1),o("div",{class:"bottom"},[o("time",{class:"time"},c("UID: "+i.user.uid),1),m(" TODO "),i.isFriend?(d(),r(k,{key:0,type:"primary",onClick:a[0]||(a[0]=s=>v.navigateToChat(i.user.uid))},{default:l((()=>[g("聊天")])),_:1})):(d(),r(k,{key:1,class:"button",onClick:a[1]||(a[1]=s=>v.addFriend(i.user.uid))},{default:l((()=>[g("添加")])),_:1}))])])])),_:1})])),_:1}),u(b,null,{default:l((()=>[u(j,null,{default:l((()=>[(d(!0),h(f,null,p(i.List,((s,a)=>(d(),r(L,{span:22,key:s.id,style:{margin:"2%"}},{default:l((()=>[u(F,{"body-style":{padding:"0px"}},{default:l((()=>[o("div",{onClick:a=>v.getDetails(s.id)},[s.postImageList.length>0?(d(),h("img",{key:0,src:s.postImageList[0].image,class:"image"},null,8,["src"])):(d(),h("img",{key:1,src:"https://static.runoob.com/images/demo/demo2.jpg",class:"image"}))],8,["onClick"]),o("div",{style:{padding:"14px"}},[o("span",null,c(s.title),1),o("div",{class:"bottom"},[o("time",{class:"time"},c(s.content),1)])])])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-b4ff0c52"]]);export{b as default};
