# Redis（登录）

## 一、用户信息

### （1）用户表

| 属性        | 类型         | 说明                             |
| ----------- | ------------ | -------------------------------- |
| id          | bigint(20)   | UNSIGNED NOT NULL AUTO_INCREMENT |
| phone       | varchar(11)  |                                  |
| email       | varchar(20)  |                                  |
| nick_name   | varchar(32)  |                                  |
| icon        | varchar(255) |                                  |
| create_time | timestamp    |                                  |
| update_time | timestamp    |                                  |

```sql
DROP TABLE IF EXISTS `tb_user`;
CREATE TABLE `tb_user`  (
  `id` bigint(20) UNSIGNED NOT NULL AUTO_INCREMENT COMMENT '主键',
  `phone` varchar(11) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '手机号码',
  `email` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NOT NULL COMMENT '邮箱',
  `password` varchar(128) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '' COMMENT '密码，加密存储',
  `nick_name` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '' COMMENT '昵称，默认是用户id',
  `icon` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci NULL DEFAULT '' COMMENT '人物头像',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
  PRIMARY KEY (`id`) USING BTREE,
  UNIQUE INDEX `uniqe_key_phone`(`phone`) USING BTREE,
  UNIQUE INDEX `uniqe_key_email`(`email`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 1010 CHARACTER SET = utf8mb4 COLLATE = utf8mb4_general_ci ROW_FORMAT = Compact;
```

```java
import com.baomidou.mybatisplus.annotation.TableName;
import lombok.Data;

import java.util.Date;

@Data
@TableName("tb_user")
public class User {
    private Long id;
    private String phone;
    private String email;
    private String password;
    private String nickName;
    private String icon;
    private Date createTime;
    private Date updateTime;
}
```

## 二、统一返回结果 Result

```java
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.util.List;

@Data
@NoArgsConstructor
@AllArgsConstructor
public class Result {
    private Boolean success;
    private String message;
    private String errorMsg;
    private Object data;
    private Long total;

    public static Result ok(){
        return new Result(true,null,null,null,null);
    }
    public static Result ok(String message){
        return new Result(true,message,null,null,null);
    }
    public static Result ok(Object data){
        return new Result(true,null,null,data,null);
    }
    public static Result ok(Object data,String message){
        return new Result(true,message,null,data,null);
    }
    public static Result ok(List<?> data, Long total){
        return new Result(true,null,null,data,total);
    }
    public static Result fail(String errorMsg){
        return new Result(true,null,errorMsg,null,null);
    }
    public static Result fail(String message,String errorMsg){
        return new Result(true,message,errorMsg,null,null);
    }
}
```

